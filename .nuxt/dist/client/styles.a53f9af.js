(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{146:function(t,e,n){"use strict";n(119),n(48),n(11);var l=n(2),o={name:"Login",props:{login:{type:Boolean,default:!0}},data:function(){return{isActive:!1,form:{first_name:null,last_name:null,username:null,email:null,name:null,password:null,password1:null,password2:null},validForm:{},loginTemp:this.login}},methods:{handleSubmit:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loginTemp){e.next=6;break}return e.next=3,t.$auth.login({email:t.form.email,password:t.form.password}).then((function(e){t.$emit("success")})).catch((function(t){console.log(t)}));case 3:e.sent,e.next=8;break;case 6:return e.next=8,t.$axios.$post("/auth/rest-auth/registration/",t.form).then((function(e){t.loginTemp=!0})).catch((function(t){console.log(t)}));case 8:case"end":return e.stop()}}),e)})))()}}},r=n(4),c={name:"LoginBar",components:{Login:Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticStyle:{width:"350px"}},[n("b-field",{directives:[{name:"show",rawName:"v-show",value:!t.loginTemp,expression:"!loginTemp"}],attrs:{grouped:""}},[n("b-field",{attrs:{label:"First name",expanded:""}},[n("b-input",{attrs:{placeholder:"Larry",required:""},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}})],1),t._v(" "),n("b-field",{attrs:{label:"Last name",expanded:""}},[n("b-input",{attrs:{placeholder:"Page",required:""},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}})],1)],1),t._v(" "),n("b-field",{directives:[{name:"show",rawName:"v-show",value:!t.loginTemp,expression:"!loginTemp"}],attrs:{label:"Username"}},[n("b-input",{attrs:{type:"text",placeholder:"Your username",required:"",icon:"account"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),n("b-field",{attrs:{label:"Email"}},[n("b-input",{attrs:{type:"email",icon:"at",placeholder:"Your email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("b-field",{directives:[{name:"show",rawName:"v-show",value:t.loginTemp,expression:"loginTemp"}],attrs:{label:"Password"}},[n("b-input",{attrs:{icon:"key",type:"password","password-reveal":"",placeholder:"Your password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("b-field",{directives:[{name:"show",rawName:"v-show",value:!t.loginTemp,expression:"!loginTemp"}],attrs:{label:"Password"}},[n("b-input",{attrs:{icon:"key",type:"password","password-reveal":"",placeholder:"Your password",required:""},model:{value:t.form.password1,callback:function(e){t.$set(t.form,"password1",e)},expression:"form.password1"}})],1),t._v(" "),n("b-field",{directives:[{name:"show",rawName:"v-show",value:!t.loginTemp,expression:"!loginTemp"}],attrs:{label:"Repeat password"}},[n("b-input",{attrs:{icon:"key",type:"password","password-reveal":"",placeholder:"Your password",required:""},model:{value:t.form.password2,callback:function(e){t.$set(t.form,"password2",e)},expression:"form.password2"}})],1),t._v(" "),n("b-field",[n("b-checkbox",[t._v("Remember me")])],1),t._v(" "),n("div",{staticClass:"level"},[n("div",{staticClass:"level-left"},[n("button",{staticClass:"button is-text",on:{click:function(e){t.loginTemp=!t.loginTemp}}},[t._v(t._s(t.loginTemp?"Register":"Login")+"\n            ")])]),t._v(" "),n("div",{staticClass:"level-right"},[n("div",{staticClass:"buttons"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v("Close")]),t._v(" "),n("button",{staticClass:"button is-primary",on:{click:t.handleSubmit}},[t._v(t._s(t.loginTemp?"Login":"Register")+"\n                ")])])])])],1)}),[],!1,null,"6cac9744",null).exports},props:{layout:{default:"private"}},data:function(){return{showLogin:!1}},methods:{handleClick:function(t){this.showLogin=!0}},computed:{app:function(){return this.$store.state.config.app}}},d={name:"PartialHeader",components:{LoginBar:Object(r.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return Boolean(this.currentUser)?e("button",{staticClass:"button normalize is-bold"},[this._v(this._s(this.convertName(this.currentUser)))]):e("b-dropdown",{attrs:{position:"is-bottom-left","append-to-body":""}},[e("div",{attrs:{slot:"trigger"},slot:"trigger"},[this._v("Log in")]),this._v(" "),e("b-dropdown-item",{attrs:{custom:""}},[e("login")],1)],1)}),[],!1,null,"10d380ef",null).exports},computed:{publication:function(){return this.$store.state.config.publication},partHost:function(){if(this.publication){var t=this.publication.host.split(".");return{name:(this.publication.host.match(/([^.]+)\.\w{2,3}(?:\.\w{2})?$/)||[])[1],ext:t[t.length-1]}}return null}}},m=(n(215),Object(r.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"header"},[n("nav",{staticClass:"navbar is-dark",attrs:{role:"navigation","aria-label":"main navigation"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"navbar-brand"},[t.partHost?n("n-link",{staticClass:"navbar-item logo",attrs:{to:"/"}},[n("span",{staticClass:"is-uppercase"},[t._v(t._s(t.partHost.name))]),t._v(" "),n("span",[t._v("."+t._s(t.partHost.ext))])]):n("n-link",{staticClass:"navbar-item logo",attrs:{to:"/"}},[n("span",{staticClass:"is-uppercase"},[t._v("FOURNALIST")]),t._v(" "),n("span",[t._v(".com")])]),t._v(" "),t._m(0)],1),t._v(" "),n("div",{staticClass:"navbar-menu",attrs:{id:"navbarBasicExample"}},[n("div",{staticClass:"navbar-end"},[n("div",{staticClass:"navbar-item"},[n("login-bar")],1)])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"}},[e("span",{attrs:{"aria-hidden":"true"}}),this._v(" "),e("span",{attrs:{"aria-hidden":"true"}}),this._v(" "),e("span",{attrs:{"aria-hidden":"true"}})])}],!1,null,null,null));e.a=m.exports},147:function(t,e,n){"use strict";var l={name:"PartialFooter",computed:{publication:function(){return this.$store.state.config.publication}}},o=n(4),component=Object(o.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"footer"},[e("div",{staticClass:"has-text-centered"},[e("p",[this._v(this._s(this.publication.host)+" Â© 2020 All Rights Reserved")])])])}),[],!1,null,null,null);e.a=component.exports},148:function(t,e,n){"use strict";n(11);var l=n(2),o={name:"Comment",components:{Avatar:n(49).a},props:{value:{default:null},avatarSize:{default:"is-64x64"},readonly:{default:!1,type:Boolean}},data:function(){return{response:{results:[],count:0}}},methods:{reply:function(t){this.$emit("reply",t)},fetchChild:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.value.has_child;case 1:case"end":return e.stop()}}),e)})))()}},created:function(){this.fetchChild()}},r=n(4),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"media"},[n("figure",{staticClass:"media-left"},[n("avatar",{class:t.avatarSize+" is-bordered",attrs:{icon:"shield-account-outline",value:t.value.user.profile.media}})],1),t._v(" "),n("div",{staticClass:"media-content"},[n("div",{staticClass:"content"},[n("div",{staticClass:"level",staticStyle:{"margin-bottom":"0"}},[n("div",[n("n-link",{staticClass:"is-bold",attrs:{to:"/profile/"+t.value.user.username}},[t._v(t._s(t.convertName(t.value.user))+"\n                    ")]),t._v(" "),t.readonly?t._e():n("small",{staticClass:"button is-small is-text",on:{click:function(e){return t.$emit("reply",t.value)}}},[n("b-icon",{attrs:{icon:"reply",size:"is-small"}}),t._v(" "),n("span",[t._v("#"+t._s(t.value.id))])],1)],1),t._v(" "),n("div",{staticClass:"level-right"},[n("div",{staticClass:"buttons"},[n("small",{staticClass:"button is-text is-small"},[t._v(t._s(t.timeSince(t.value.created))+" ago")])])])]),t._v(" "),n("p",[t._v(t._s(t.value.content))])]),t._v(" "),t._l(t.response.results,(function(e){return n("comment",{key:e.id,attrs:{value:e,"avatar-size":"is-32x32"},on:{reply:t.reply}})}))],2)])}),[],!1,null,"3095adb4",null);e.a=component.exports},149:function(t,e,n){"use strict";n(36),n(20),n(15),n(12),n(24);var l=n(8),o=(n(11),n(2));function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={name:"Comment",props:{size:{default:null},parent:{default:null},post:Object},data:function(){return{comment:null}},methods:{submit:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.public_feature.feedback_post(t.feature.id,{content:t.comment,parent:t.parent?t.parent.id:void 0,is_private:t.private});case 2:n=e.sent,t.$emit("done",c(c({},n),{},{user:t.currentUser})),t.comment=null;case 5:case"end":return e.stop()}}),e)})))()}}},m=n(4),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"item",attrs:{id:"response"}},[n("b-field",[n("b-input",{attrs:{rows:"is-small"===t.size?1:2,type:"textarea",placeholder:"Add a comment..."},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),t._v(" "),n("div",{staticClass:"level is-mobile v-center"},[n("div",{staticClass:"level-left"},[n("div",{staticClass:"level-item"},[n("div",{staticClass:"button is-white is-small"},[n("user",{attrs:{value:t.currentUser?t.currentUser:void 0,"avatar-size":"is-16x16"}})],1)]),t._v(" "),t._t("default")],2),t._v(" "),n("div",{staticClass:"level-right"},[n("button",{staticClass:"button is-small",attrs:{disabled:!t.currentUser||null===t.comment||""===t.comment},on:{click:t.submit}},[n("b-icon",{attrs:{size:"is-small",icon:"send-outline"}}),t._v(" "),n("span",[t._v("Send")])],1)])])],1)}),[],!1,null,"78fa7616",null);e.a=component.exports},150:function(t,e,n){"use strict";n(43);var l=n(49),o={first_name:"",last_name:"",username:"anonymous",profile:{media:null,description:null,nick:"Anonymous"},is_staff:!1},r={name:"User",components:{Avatar:l.a},props:{canFollow:{default:!1,type:Boolean},value:{default:function(){return o}},username:{default:!1,type:Boolean},avatarSize:{default:"is-32x32",type:String},onlyAvatar:{default:!1,type:Boolean},clickable:{default:!0,type:Boolean},following:{default:!1,type:Boolean}},methods:{click:function(){!this.canFollow&&this.value.id&&this.clickable&&this.$router.replace({path:"/profile/".concat(this.value.username)})}}},c=n(4),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.value?n("div",{staticClass:"media user clickable",on:{click:t.click}},[n("div",{staticClass:"media-left"},[n("avatar",{class:"avatar "+t.avatarSize,attrs:{icon:"shield-account-outline",value:t.value.profile?t.value.profile.media:null}})],1),t._v(" "),t.onlyAvatar?t._e():n("div",{staticClass:"media-content v-center"},[t.clickable?n("n-link",{staticClass:"value",attrs:{to:t.value.id?"/profile/"+t.value.username:"#"}},[t._v(t._s(t.convertName(t.value)))]):n("span",[t._v(t._s(t.convertName(t.value)))]),t._v(" "),t.username?n("div",{staticClass:"field"},[n("small",[t._v("@"+t._s(t.value.username))])]):t._e(),t._v(" "),t._t("default")],2),t._v(" "),t.canFollow&&!t.onlyAvatar?n("div",{staticClass:"media-right"}):t._e()]):t._e()}),[],!1,null,null,null);e.a=component.exports},151:function(t,e,n){"use strict";n(28),n(42);var l={name:"Item",props:{value:{},visibleItems:{default:function(){return[]}},isFull:{type:Boolean,default:!1}},computed:{taxPrimaries:function(){return this.visibleItems.includes.hashtag?this.value.terms.filter((function(t){return"object"===t.taxonomy})):[]}},methods:{icon:function(){var t=["triangle-outline","square-outline","checkbox-blank-circle-outline"];return t[Math.floor(Math.random()*t.length)]}}},o=n(4),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.value.id?n("div",{staticClass:"media item"},[!t.isFull&&t.value.media?n("div",{staticClass:"media-left"},[n("avatar",{staticClass:"is-96x96 is-bordered",attrs:{value:t.value.media}})],1):t._e(),t._v(" "),n("div",{staticClass:"media-content"},[t.isFull?n("h1",{staticClass:"title"},[t._v(t._s(t.value.title))]):n("h4",[n("n-link",{staticClass:"widget-title",attrs:{to:"/"+t.value.post_type+"/"+t.value.slug}},[t._v(t._s(t.value.title)+"\n            ")])],1),t._v(" "),t.visibleItems.includes("description")?n("p",{staticClass:"description"},[t._v(t._s(t.value.description))]):t._e(),t._v(" "),n("div",{staticClass:"meta"},[n("div",{staticClass:"buttons"},[t.value.vote_object&&t.visibleItems.includes("vote")?n("div",{staticClass:"button is-text is-small",class:{"is-active":t.value.vote_object["is-voted"]}},[n("b-icon",{staticClass:"is-clickable",attrs:{icon:t.value.vote_object["is-voted"]?"chevron-down":"chevron-up"}}),t._v(" "),n("div",[t._v(t._s(t.value.vote_object.total))])],1):t._e(),t._v(" "),t.value.user?n("div",{staticClass:"button is-text is-small"},[n("user",{attrs:{value:t.value.user,"avatar-size":"is-16x16"}})],1):t._e(),t._v(" "),t._l(t.taxPrimaries,(function(e){return n("n-link",{key:e.id,staticClass:"button is-text is-small",attrs:{to:"/"+e.taxonomy+"/"+e.term.slug}},[n("avatar",{staticClass:"is-16x16",attrs:{icon:"pound",value:e.media}}),t._v(" "),n("span",[t._v(t._s(e.term.title))])],1)})),t._v(" "),n("n-link",{staticClass:"button is-text is-small",attrs:{to:"/"+t.value.post_type+"/"+t.value.slug}},[n("span",[t._v(t._s(t.timeSince(new Date(t.value.created)))+" ago")])]),t._v(" "),t.value.meta.source?n("a",{staticClass:"button is-text is-small",attrs:{href:t.value.meta.source.href,target:"_blank"}},[n("b-icon",{attrs:{icon:"link",size:"is-small"}}),t._v(" "),t.value.meta.source.archor?n("span",[t._v(t._s(t.value.meta.source.archor))]):t._e()],1):t._e()],2)]),t._v(" "),t._t("default")],2)]):t._e()}),[],!1,null,null,null);e.a=component.exports},152:function(t,e,n){"use strict";var l=n(4),component=Object(l.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("partial-header"),this._v(" "),e("Nuxt"),this._v(" "),e("partial-footer")],1)}),[],!1,null,null,null);e.a=component.exports},189:function(t,e,n){"use strict";var l=n(74);n.n(l).a},191:function(t,e,n){},192:function(t,e,n){},215:function(t,e,n){"use strict";var l=n(75);n.n(l).a},216:function(t,e,n){"use strict";var l=n(76);n.n(l).a},218:function(t,e,n){"use strict";var l=n(77);n.n(l).a},220:function(t,e,n){"use strict";var l=n(78);n.n(l).a},224:function(t,e,n){"use strict";var l=n(79);n.n(l).a},227:function(t,e,n){"use strict";n.r(e);n(36),n(20),n(15),n(24),n(43);var l=n(8),o=(n(12),n(96)),r=n(95),c=new r.a,d={name:"Editor",components:{"tiny-editor":o.a},props:{value:{},placeholder:{},changed:{},height:{default:250}},data:function(){return{editor:null,editorData:null,editorConfig:{height:this.height,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |                     alignleft aligncenter alignright alignjustify |                     bullist numlist outdent indent | removeformat | help"},turnDown:null}},methods:{},watch:{editorData:function(){this.$emit("input",c.turndown(this.editorData))},changed:function(){this.editorData=this.toHTML(this.value)}},created:function(){this.editorData=this.toHTML(this.value)}},m=n(4),v=Object(m.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("tiny-editor",{attrs:{"api-key":"sgdhe7czf3wgmsipn054ql44mi1ce2khbevpw9atwsq3ir1q",init:t.editorConfig},model:{value:t.editorData,callback:function(e){t.editorData=e},expression:"editorData"}})],1)}),[],!1,null,null,null).exports,h=(n(11),n(2)),f=n(37),_={name:"TaxSelector",props:{value:{type:Array,require:!0,default:function(){return[]}},taxonomy:{default:"tag",type:String},size:String},data:function(){return{data:[],response:{results:[],count:0}}},computed:{uri:function(){return"/pub-".concat(this.$store.state.config.publication.id,"/taxonomies/")}},methods:{init:function(){var t=this;this.data=this.value.filter((function(e){return e.taxonomy===t.taxonomy}))},fetch:Object(f.debounce)(function(){var t=Object(h.a)(regeneratorRuntime.mark((function t(text){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.$get(this.uri,{params:{search:text,taxonomy:this.taxonomy}});case 2:this.response=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()),handleInput:function(data){var t=this;return Object(h.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof data){e.next=4;break}return e.next=3,t.$axios.$post(t.uri,{term_title:data,taxonomy:t.taxonomy,publication:t.$store.state.config.publication.id});case 3:data=e.sent;case 4:data&&data.id&&t.$emit("select",data);case 5:case"end":return e.stop()}}),e)})))()}},watch:{value:{deep:!0,handler:function(){this.init()}}},created:function(){this.init()}},y=Object(m.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-taginput",{attrs:{value:t.data,data:t.response.results,autocomplete:"","allow-new":"",field:"term.title",icon:"label",placeholder:"Add a "+t.taxonomy,size:t.size},on:{add:t.handleInput,remove:t.handleInput,typing:t.fetch},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.option.term.title))]}}])},[t._v(" "),n("template",{slot:"empty"},[t._v("There are no items")])],2)}),[],!1,null,"2ced73d4",null).exports,C=(n(92),n(21),{props:{text:{},multiple:{type:Boolean,default:!1},app:{}},data:function(){return{dropFiles:[],isLoading:!1}},name:"upload",methods:{handleInput:function(data){var t=this;return Object(h.a)(regeneratorRuntime.mark((function e(){var n,i,l,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],t.isLoading=!0,!t.multiple){e.next=14;break}i=0;case 4:if(!(i<data.length)){e.next=12;break}return e.next=7,t.beforeUpload(data[i]);case 7:l=e.sent,n.push(l);case 9:i++,e.next=4;break;case 12:e.next=18;break;case 14:return e.next=16,t.beforeUpload(data);case 16:o=e.sent,n.push(o);case 18:t.$emit("done",n),t.dropFiles=[],t.isLoading=!1;case 21:case"end":return e.stop()}}),e)})))()},beforeUpload:function(t){var e=this;return Object(h.a)(regeneratorRuntime.mark((function n(){var l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(l=new FormData).append("path",t),l.append("title",t.name),e.app&&l.append("app",e.app.id),n.next=6,e.$api.media.create(l);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})))()}}});function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k={name:"MediaSelect",components:{upload:Object(m.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-upload",{attrs:{multiple:t.multiple,"drag-drop":""},on:{input:t.handleInput},model:{value:t.dropFiles,callback:function(e){t.dropFiles=e},expression:"dropFiles"}},[n("div",{staticClass:"content has-text-centered"},[n("p",[n("b-icon",{attrs:{icon:"cloud-upload",size:"is-large"}})],1),t._v(" "),t.text?n("p",[t._v(t._s(t.text))]):t._e()]),t._v(" "),n("b-loading",{attrs:{"is-full-page":!1,active:t.isLoading,"can-cancel":!0},on:{"update:active":function(e){t.isLoading=e}}})],1)}),[],!1,null,null,null).exports},props:{value:{},query:{default:function(){return{}}},multiple:{type:Boolean,default:!1},column:{default:"is-2"}},data:function(){var data=this.value;return data||(data=this.multiple?[]:null),{data:data,response:{count:0,results:[]},isShow:!1,loading:!1,q:{search:null,page_size:6,oder_by:"-id",page:1}}},methods:{fetch:Object(f.debounce)(function(){var t=Object(h.a)(regeneratorRuntime.mark((function t(text){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loading=!0,this.q.search=text,this.$api.media.list(x(x({},this.q),this.query)).then((function(t){e.response=t})).catch((function(){e.fetch(e.q.search)})).finally((function(){e.loading=!1}));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()),uploaded:function(t){this.response.results.splice(this.response.results.length-1-t.length,t.length),this.response.results=t.concat(this.response.results)},select:function(img){if(this.multiple){var t=this.data.map((function(t){return t.id})).indexOf(img.id);t>=0?this.data.splice(t,1):this.data.push(img)}else this.data&&this.data.id===img.id?this.data=null:this.data=img},showModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.isShow=!0,0===this.response.results.length&&this.fetch(null))},deleteItem:function(t){this.multiple?this.data.splice(t,1):this.data=null}},watch:{data:{deep:!0,handler:function(){this.$emit("input",this.data)}},value:{deep:!0,handler:function(){this.data=this.value}},"q.page":function(){this.fetch(this.q.search)},"q.search":function(){this.q.page=1}},computed:{shows:function(){return this.multiple?this.data:this.data?[this.data]:[]}}},O=(n(218),Object(m.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"columns is-multiline"},[t.multiple||!t.shows.length?n("div",{class:"column "+t.column},[n("div",{staticClass:"avatar is-bordered initials v-center clickable image is-1by1"},[n("div",{staticClass:"wrapper clickable",on:{click:function(e){return t.showModal(!1)}}},[n("b-icon",{attrs:{icon:"image-outline"}})],1)])]):t._e(),t._v(" "),t._l(t.shows,(function(s,e){return s?n("div",{key:s.id,class:"column "+t.column},[n("div",{staticClass:"avatar v-center clickable image is-1by1"},[n("div",{staticClass:"wrapper clickable"},[s?n("img",{attrs:{src:s.sizes.thumb_247_247,alt:s.title},on:{click:function(e){return t.showModal(t.multiple)}}}):n("b-icon",{attrs:{icon:"image-outline"}}),t._v(" "),n("div",{staticClass:"delete",on:{click:function(n){return t.deleteItem(e)}}})],1)])]):t._e()}))],2),t._v(" "),t.isShow?n("div",[n("div",{staticClass:"media-select"},[n("b-field",[n("div",{staticClass:"level is-mobile"},[n("div",{staticClass:"level-left"},[n("h4",{staticClass:"widget-title"},[t._v("Media Browser")])]),t._v(" "),n("div",{staticClass:"level-right"},[n("b-icon",{staticClass:"clickable",attrs:{size:"is-small",icon:"close"},nativeOn:{click:function(e){t.isShow=!1}}})],1)])]),t._v(" "),n("b-field",[n("upload",{attrs:{multiple:"",app:t.query.pub},on:{done:t.uploaded}})],1),t._v(" "),n("b-field",[n("div",{staticClass:"level"},[n("div",{staticClass:"level-left"},[n("b-input",{attrs:{icon:"magnify",placeholder:"Search"}})],1),t._v(" "),n("div",{staticClass:"level-right"},[n("b-pagination",{attrs:{total:t.response.count,current:t.q.page,simple:!0,"per-page":t.q.page_size},on:{"update:current":function(e){return t.$set(t.q,"page",e)}}})],1)])]),t._v(" "),t.loading?n("div",{staticClass:"columns is-variable is-2 is-multiline"},t._l(6,(function(i){return n("div",{key:i,staticClass:"column is-2"},[n("b-skeleton",{attrs:{width:"100%",height:"145px"}})],1)})),0):n("div",{staticClass:"columns is-variable is-2 is-multiline"},t._l(t.response.results,(function(img){return n("div",{key:img.id,staticClass:"column is-2"},[n("div",{staticClass:"image clickable is-1by1",on:{click:function(e){return t.select(img)}}},[n("img",{attrs:{src:img.sizes.thumb_247_247,alt:img.title}})])])})),0)],1)]):t._e()])}),[],!1,null,null,null).exports),j=n(103),$=new r.a,S={name:"Editor",components:{"tiny-editor":o.a},props:{value:{},placeholder:{},changed:{},height:{default:250}},data:function(){return{editor:null,editorData:null,editorConfig:{height:this.height,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |                     alignleft aligncenter alignright alignjustify |                     bullist numlist outdent indent | removeformat | help"},turnDown:null}},methods:{},watch:{editorData:function(){this.$emit("input",$.turndown(this.editorData))},changed:function(){this.editorData=this.toHTML(this.value)}},created:function(){this.editorData=this.toHTML(this.value)}},z=Object(m.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("tiny-editor",{attrs:{"api-key":"sgdhe7czf3wgmsipn054ql44mi1ce2khbevpw9atwsq3ir1q",init:t.editorConfig},model:{value:t.editorData,callback:function(e){t.editorData=e},expression:"editorData"}})],1)}),[],!1,null,null,null).exports,E={name:"FieldJson",props:{schema:{},value:{default:function(){return{}}}},data:function(){return{temp:this.value}},watch:{temp:{handler:function(t,e){this.$emit("input",t)},deep:!0}}},P=Object(m.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},t._l(t.schema.options.schemas,(function(e,i){return n("s-field",{key:i,attrs:{schema:e,value:t.temp[e.field]},on:{input:function(n){t.temp[e.field]=n}}})})),1)])}),[],!1,null,"3185e634",null).exports,T=n(219);function D(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function R(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var A={name:"SelectData",props:{multiple:{default:!1,type:Boolean},icon:{default:"tag",type:String},field:{default:"title",type:String},createField:{default:"title",type:String},value:{},module:{},allowNew:{type:Boolean,default:!0},size:{},placeholder:{type:String,default:"Anything"},q:{default:function(){return{}},type:Object}},data:function(){var data=this.value;Boolean(data)||(data=this.multiple?[]:null);var t=null;return!this.multiple&&this.value&&(t=this.value[this.field]),{name:t,querySet:[],isSelectOnly:!1,data:data,openOnFocus:!1,keepFirst:!1,fetching:!1}},methods:{onSelect:function(option){this.data=option,this.$emit("add",option),this.$emit("input",option)},onAdd:function(t){var e=this;return Object(h.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("string"!=typeof t){n.next=11;break}if(!e.multiple){n.next=7;break}return n.next=4,e.$api[e.module].create(R(Object(l.a)({},e.createField,t),e.cleanData(e.q)));case 4:e.data[e.data.indexOf(t)]=n.sent,n.next=11;break;case 7:return n.next=9,e.$api[e.module].create(R(Object(l.a)({},e.createField,t),e.cleanData(e.q)));case 9:e.data=n.sent,e.name=e.data[e.field];case 11:case"end":return n.stop()}}),n)})))()},beforeAdding:function(t){return-1===this.data.map((function(t){return t.id})).indexOf(t.id)},getQuerySet:n.n(T)()((function(text){var t=this;this.$api[this.module].list(R(R({},this.q),{},{search:text})).then((function(e){t.querySet=e.results}))}),500)},watch:{value:function(){this.data=this.value,!this.multiple&&this.value?this.name=this.value[this.field]:this.name=null},data:function(){this.$emit("input",this.data)}}},N=Object(m.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.multiple?n("b-taginput",{staticClass:"editable",attrs:{loading:t.fetching,size:t.size,data:t.querySet,autocomplete:"","allow-new":t.allowNew,"open-on-focus":t.openOnFocus,field:t.field,icon:t.icon,placeholder:t.placeholder,"before-adding":t.beforeAdding},on:{add:t.onAdd,typing:t.getQuerySet},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.option[t.field])+"\n    ")]}}],null,!1,2608211262),model:{value:t.data,callback:function(e){t.data=e},expression:"data"}},[t._v(" "),n("template",{slot:"empty"},[t._v("Enter to add")])],2):n("div",{staticClass:"taginput"},[n("div",{staticClass:"taginput-container is-focusable"},[n("b-autocomplete",{attrs:{loading:t.fetching,size:t.size,placeholder:t.placeholder,"keep-first":t.keepFirst,"open-on-focus":t.openOnFocus,data:t.querySet,field:t.field,icon:t.icon},on:{focus:function(e){return t.$emit("focus")},typing:t.getQuerySet,select:t.onSelect},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onAdd(t.name)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[t.allowNew?n("template",{slot:"footer"},[n("a",{on:{click:function(e){return t.onAdd(t.name)}}},[n("span",[t._v(" Add new... ")])])]):t._e(),t._v(" "),n("template",{slot:"empty"},[t._v("No results for "+t._s(t.name))])],2)],1)])}),[],!1,null,null,null).exports,U={name:"JsonArray",props:{schema:{},value:{default:function(){return[]}}},data:function(){var t={};return this.schema.options.schemas&&this.schema.options.schemas.forEach((function(e){t[e.field]=e.options.default?e.options.default:null})),{opening:0,temp:this.value?this.value:[],newInstance:t,active:null,showModal:!1}},methods:{add:function(){this.temp.push(Object(f.cloneDeep)(this.newInstance))},updateItem:function(t){this.active=t,this.showModal=!0},deleteItem:function(t){if(t){var e=this.temp.map((function(t){return t.field})).indexOf(t.field);e>=0&&this.temp.splice(e,1)}}},watch:{temp:{handler:function(t,e){this.$emit("input",t)},deep:!0}}},B=(n(220),{name:"SField",components:{JsonArray:Object(m.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-collapse",{staticClass:"j-array card",attrs:{animation:"slide",open:!1},scopedSlots:t._u([{key:"trigger",fn:function(e){return n("div",{staticClass:"card-header",attrs:{role:"button"}},[n("p",{staticClass:"card-header-title"},[t._v(t._s(t.schema.label))]),t._v(" "),n("a",{staticClass:"card-header-icon"},[n("b-icon",{attrs:{icon:e.open?"menu-down":"menu-up"}})],1)])}}])},[t._v(" "),n("div",{staticClass:"card-content"},[t._l(t.temp,(function(e,l){return n("div",{key:l,staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"media"},[n("div",{staticClass:"media-content"},[t._v("#"+t._s(l+1)+" - "+t._s(e.field))]),t._v(" "),n("div",{staticClass:"media-right"},[n("div",{staticClass:"buttons"},[n("div",{staticClass:"button is-text is-small",on:{click:function(n){return t.updateItem(e)}}},[n("b-icon",{attrs:{icon:"cogs",size:"is-small"}})],1),t._v(" "),n("div",{staticClass:"button is-text is-small",on:{click:function(n){return t.deleteItem(e)}}},[n("b-icon",{attrs:{type:"is-danger",icon:"delete",size:"is-small"}})],1)])])])])])})),t._v(" "),n("div",{staticClass:"card clickable",on:{click:function(e){return t.add()}}},[n("div",{staticClass:"card-content"},[n("b-icon",{attrs:{size:"is-small",icon:"plus"}})],1)])],2),t._v(" "),n("b-modal",{attrs:{active:t.showModal},on:{"update:active":function(e){t.showModal=e}}},[t.active?n("div",{staticClass:"modal-card"},[n("div",{staticClass:"modal-card-head"},[n("div",{staticClass:"modal-card-title"},[t._v(t._s(t.active.label?t.active.label:"Untitled"))]),t._v(" "),n("div",{staticClass:"modal-card-icon"},[n("div",{staticClass:"buttons"},[n("div",{staticClass:"button is-danger is-small",on:{click:function(e){return t.deleteItem(t.active)}}},[n("b-icon",{attrs:{size:"is-small",icon:"delete"}})],1),t._v(" "),n("div",{staticClass:"button is-small",on:{click:function(e){t.showModal=!1}}},[n("b-icon",{attrs:{size:"is-small",icon:"close"}})],1)])])]),t._v(" "),n("div",{staticClass:"modal-card-body scrollable"},t._l(t.schema.options.schemas,(function(e){return n("s-field",{key:e.field,attrs:{schema:e,value:t.active[e.field]},on:{input:function(n){t.active[e.field]=n}}})})),1)]):t._e()])],1)}),[],!1,null,null,null).exports,MediaSelect:O,SelectData:N,FieldJson:P,Editor:z},props:{schema:{default:function(){return{label:null,field:"field",type:j.TEXT,options:{}}}},value:{default:null}},data:function(){var t=this.value;return null===t&&this.schema.type===j.JSON&&(t={},this.$emit("input",t)),{types:j,temp:t}},watch:{temp:{handler:function(t,e){this.$emit("input",t)},deep:!0}}}),I=Object(m.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-field",{attrs:{expanded:"",label:t.schema.label}},[t.schema.type===t.types.TEXT?n("b-input",{attrs:{expanded:"",placeholder:t.schema.options.help},model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}}):t.schema.type===t.types.NUMBER?n("b-numberinput",{attrs:{expanded:"",placeholder:t.schema.options.help,"controls-position":"compact"},model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}}):t.schema.type===t.types.EDITOR?n("editor",{attrs:{expanded:""},model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}}):t.schema.type===t.types.T_ARRAY?n("b-taginput",{attrs:{expanded:""},model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}}):t.schema.type===t.types.JSON?n("FieldJson",{attrs:{schema:t.schema},model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}}):t.schema.type===t.types.J_ARRAY?n("JsonArray",{attrs:{schema:t.schema},model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}}):t.schema.type===t.types.SELECT?n("b-select",{attrs:{expanded:""},model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}},[t._l(t.schema.options.dataset,(function(option){return n("option",{key:option.value,domProps:{value:option.value}},[t._v("\n            "+t._s(option.label)+"\n        ")])})),t._v(" "),n("option",{domProps:{value:null}},[t._v("________")])],2):t.schema.type===t.types.DATA?n("SelectData",{attrs:{module:t.schema.options.module,field:t.schema.options.field_showing,q:t.schema.options.query},model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}}):t.schema.type===t.types.BOOLEAN?n("b-switch",{model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}}):t.schema.type===t.types.MEDIA?n("MediaSelect",{attrs:{multiple:t.schema.options.multiple},model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}}):t.schema.type===t.types.DATETIME?n("b-datetimepicker",{attrs:{expanded:""},model:{value:t.temp,callback:function(e){t.temp=e},expression:"temp"}}):t._e()],1)}),[],!1,null,"7a620960",null).exports,F=n(229);function L(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var H={title:null,description:null,content:null,meta:{},post_type:"post",terms:[]},J={name:"PostMaster",components:{MediaSelect:O,TaxSelector:y,Editor:v,"s-field":I},head:function(){return{title:"New ".concat(this.form.post_type)+" - ".concat(this.publication.host)}},computed:{publication:function(){return this.$store.state.config.publication},field_addons:function(){var t=this;if(this.publication&&this.publication.options.post_types&&this.form.post_type){var e=this.publication.options.post_types.filter((function(e){return e.label===t.form.post_type}));if(e.length&&e[0].field_addons)return e[0].field_addons}return[]},uri:function(){return"/pub-".concat(this.$store.state.config.publication.id,"/posts/")}},data:function(){return{url:null,form:Object(f.cloneDeep)(H),showOption:!1,loading:{fetch:!1,submit:!1}}},methods:{addTerm:function(t){var e=this.form.terms.map((function(t){return t.id})).indexOf(t.id);e>=0?this.form.terms.splice(e,1):this.form.terms.push(t)},fetchURL:function(){var t=this;this.url&&(this.loading.fetch=!0,this.$axios.$get("/general/fetch/",{params:{url:this.url}}).then((function(e){t.form.title=e.title,t.form.description=e.description,t.form.meta.url=t.url})).catch((function(){t.form.title=null,t.form.description=null,t.form.meta.url=null})).finally((function(){t.loading.fetch=!1})))},submit:function(){var t=this;this.loading.submit=!0,"link"===this.form.post_type&&this.url&&!this.form.meta.url&&(this.form.meta.url=this.url),this.$axios.$post(this.uri,M(M({},this.cleanData(this.form)),{},{publications:[this.publication.id]})).then((function(e){F.a.open({type:"is-success",message:"Successfully!"}),t.form=Object(f.cloneDeep)(H),t.$router.replace({path:"/".concat(e.post_type,"/").concat(e.slug)})})).catch((function(){F.a.open({type:"is-danger",message:"Something wrong!"})})).finally((function(){t.loading.submit=!1}))}},watch:{"form.post_type":function(){this.url=null,this.form.title=null,this.form.description=null,this.form.meta.url=null}}},Y=Object(m.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.publication&&t.publication.options.allow_guess_post?n("main",{staticClass:"main"},[n("div",{staticClass:"container"},[n("div",{staticClass:"level is-mobile"},[n("div",{staticClass:"level-left"},[n("b-field",[n("div",{staticClass:"control"},[n("div",{staticClass:"button is-static"},[t._v("New")])]),t._v(" "),n("div",{staticClass:"control"},[n("b-dropdown",{model:{value:t.form.post_type,callback:function(e){t.$set(t.form,"post_type",e)},expression:"form.post_type"}},[n("div",{staticClass:"button",attrs:{slot:"trigger"},slot:"trigger"},[n("span",{staticClass:"is-capitalized"},[t._v(t._s(t.form.post_type))]),t._v(" "),n("b-icon",{attrs:{icon:"chevron-down",size:"is-small"}})],1),t._v(" "),t._l(t.publication.options.post_types,(function(e){return n("b-dropdown-item",{key:e.label,attrs:{value:e.label}},[n("span",[t._v(t._s(e.title))])])}))],2)],1)])],1),t._v(" "),n("div",{staticClass:"level-right"},[n("div",{staticClass:"control"},[n("div",{staticClass:"button",class:{"is-success":t.showOption},on:{click:function(e){t.showOption=!t.showOption}}},[n("b-icon",{attrs:{size:"is-small",icon:"cogs"}})],1)])])]),t._v(" "),n("div",{staticStyle:{"margin-bottom":".75rem"}},[n("transition",{attrs:{name:"fade"}},[t.showOption?n("div",[t.field_addons.length?n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},t._l(t.field_addons,(function(e){return n("div",{key:e.field},[n("s-field",{attrs:{schema:e,value:t.form.meta[e.field]},on:{input:function(n){t.form.meta[e.field]=n}}})],1)})),0)]):t._e(),t._v(" "),n("b-field",{attrs:{label:"Taxonomy","label-position":"on-border"}},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},t._l(t.publication.options.taxonomies,(function(e){return n("b-field",{key:e.id},[n("TaxSelector",{attrs:{taxonomy:e.label,value:t.form.terms?t.form.terms:[]},on:{select:t.addTerm}})],1)})),1)])])],1):t._e()]),t._v(" "),n("transition",[t.showOption?t._e():n("div",["link"===t.form.post_type?n("b-field",[n("b-input",{attrs:{expanded:"",icon:"link",placeholder:"https://fournalist.com"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}}),t._v(" "),n("div",{staticClass:"control"},[n("div",{staticClass:"button",on:{click:t.fetchURL}},[t._v("Fetch")])])],1):t._e(),t._v(" "),"link"===t.form.post_type?n("b-field",[n("b-input",{attrs:{expanded:"",icon:"format-text",placeholder:"Link title"},model:{value:t.form.meta.archor,callback:function(e){t.$set(t.form.meta,"archor",e)},expression:"form.meta.archor"}})],1):t._e(),t._v(" "),n("b-field",[n("b-input",{attrs:{expanded:"",placeholder:"Title"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("b-field",[n("b-input",{attrs:{placeholder:"Description",rows:2,type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),n("b-field",[n("editor",{attrs:{height:"500"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1)])],1),t._v(" "),n("div",{staticClass:"level is-mobile"},[n("div",{staticClass:"level-left"},[n("div",{staticClass:"button"},[n("user",{attrs:{value:t.currentUser?t.currentUser:void 0,"avatar-size":"is-24x24"}})],1)]),t._v(" "),n("div",{staticClass:"level-right"},[n("div",{staticClass:"button is-dark",on:{click:function(e){return t.submit()}}},[t._v("Submit")])])])])]):t._e()}),[],!1,null,"29723870",null);e.default=Y.exports},228:function(t,e,n){"use strict";n.r(e);n(48),n(221),n(222),n(11);var l=n(2),o=(n(28),n(42),n(60)),r={name:"SubscribeBox"},c=n(4),d=Object(c.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subscribe-box notification is-light card"},[e("div",{staticClass:"columns is-variable is-1 is-multiline"},[e("div",{staticClass:"column is-12"},[e("h4",{staticClass:"widget-title"},[this._v("Subscribe to get daily news")]),this._v(" "),e("b-checkbox",{attrs:{size:"is-small"}},[this._v("I agree to subscribe to the newsletter. See our Privacy\n                Policy.\n            ")])],1),this._v(" "),e("div",{staticClass:"column is-12"},[e("b-field",[e("b-input",{attrs:{icon:"email-outline",expanded:"",placeholder:"Your Email"}}),this._v(" "),e("div",{staticClass:"control"},[e("div",{staticClass:"button is-primary"},[this._v("Signup")])])],1)],1)])])}),[],!1,null,"0a8319b7",null).exports,m=n(104),v={name:"Master",components:{SubscribeBox:d},data:function(){return{home:{term:{},newest:{results:[],count:0},popular:{results:[],count:0},terms:[]},post:{},taxonomy:{},query:{page_size:10,page:1,show_cms:!0,order:"popular",term:null},loading:!1}},head:function(){return{title:this.page.title+" - ".concat(this.publication.host),meta:[{hid:"og:title",name:"og:title",content:this.page.title},{hid:"description",name:"description",content:this.page.description},{hid:"og:description",name:"og:description",content:this.page.description},{hid:"og:url",name:"og:url",content:"".concat(this.publication.url,"/").concat(this.$route.path)},{hid:"og:type",name:"og:type",content:this.isHome&&this.isTax?"website":"article"}].concat(Object(o.a)(this.media?[{hid:"og:image",name:"og:image",content:this.media.sizes.full_size}]:[]))}},computed:{isHome:function(){return!Boolean(this.$route.params.post_type||this.$route.params.id)},response:function(){return this.home[this.query.order]},isTax:function(){return Boolean(this.$route.params.post_type)&&void 0===this.$route.params.id},page:function(){var title="CMS",t=null;if(this.publication)if(this.isHome)t=this.publication.description,title=this.publication.title;else if(this.isTax){var e=this.publication.options.post_types.map((function(t){return t.label})),n=this.$route.params.post_type;["newest","popular"].includes(n)?title=n:e.includes(n)?title=this.publication.options.post_types[e.indexOf(n)].title:this.home.term.id?(title=this.home.term.title,t=this.home.term.description):title=n}else this.isPost&&this.post&&(title=this.post.title,t=this.post.description);return{title:title,description:t}},isPost:function(){return Boolean(this.$route.params.id)},totalPage:function(){return this.response.count/(this.query.page_size?this.query.page_size:10)},next:function(){return this.query.page<this.totalPage?this.query.page+1:0},previous:function(){return this.query.page>1?this.query.page-1:0},hashTags:function(){return this.post.terms?this.post.terms.filter((function(t){return"tag"===t.taxonomy})):[]},publication:function(){return this.$store.state.config.publication},media:function(){if(this.post){if(this.post.media)return this.post.media;if(this.post.medias&&this.post.medias.length)return this.post.medias[0]}return this.publication&&this.publication.media?this.publication.media:null}},fetch:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var p,n,l,q,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loading=!0,p=t.$route.params,!(n=t.publication)){e.next=20;break}if(l="/".concat(n.host),n.options.default_post_type&&(t.query.post_type=n.options.default_post_type),q=t.$route.query,"newest"!==p.post_type&&"newest"!==q.order||(t.query.order="newest"),t.query.page=q.page?Number.parseInt(q.page):1,p.post_type&&!["newest","popular"].includes(p.post_type)&&(t.publication.options.post_types.map((function(t){return t.label})).includes(p.post_type)?t.query.post_type=p.post_type:t.query.term=p.post_type),p.id){e.next=16;break}return e.next=13,t.$axios.$post("".concat(l,"/posts/"),{param:t.query,schema:["term","terms",{popular:[{results:m.b},"count"]},{newest:[{results:m.b},"count"]}]},{params:{force:q.force}});case 13:t.home=e.sent,e.next=20;break;case 16:return o=p.id.split("-"),e.next=19,t.$axios.$post("".concat(l,"/posts/").concat(o[o.length-1],"/"),{schema:m.a},{params:{force:q.force}});case 19:t.post=e.sent;case 20:t.loading=!1;case 21:case"end":return e.stop()}}),e)})))()},watch:{"$route.query":function(){this.$fetch(),this.toTop()}},methods:{visibleItems:function(t){return["description","hashtag"].concat(Object(o.a)(this.publication&&this.publication.options.allow_vote?["vote"]:[]))}}},h=(n(224),Object(c.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"site-wrapper"},[n("div",{staticClass:"sub-nav navbar"},[n("div",{staticClass:"container"},[n("div",{staticClass:"navbar-menu"},[t.isTax||t.isHome?n("div",{staticClass:"navbar-start"},[n("b-dropdown",{staticClass:"topic-select",attrs:{"trap-focus":""}},[n("div",{staticClass:"navbar-item clickable",attrs:{slot:"trigger"},slot:"trigger"},[n("span",[t._v("Topic")]),t._v(" "),n("b-icon",{attrs:{size:"is-small",icon:"chevron-down"}})],1),t._v(" "),n("b-dropdown-item",{staticStyle:{"min-width":"300px"},attrs:{custom:""}},[n("b-field",[n("b-input",{attrs:{placeholder:"Search"}})],1)],1),t._v(" "),n("b-dropdown-item")],1),t._v(" "),n("n-link",{staticClass:"navbar-item",class:{"is-active":"popular"===t.query.order},attrs:{to:"/"}},[n("b-icon",{attrs:{icon:"fire",size:"is-small"}}),t._v(" "),n("span",[t._v("Popular")])],1),t._v(" "),n("n-link",{staticClass:"navbar-item",class:{"is-active":"newest"===t.query.order},attrs:{to:"/newest"}},[n("b-icon",{attrs:{icon:"update",size:"is-small"}}),t._v(" "),n("span",[t._v("New")])],1)],1):n("div",{staticClass:"navbar-start"},[n("n-link",{staticClass:"navbar-item",attrs:{to:"/"}},[n("b-icon",{attrs:{icon:"chevron-left",size:"is-small"}}),t._v(" "),n("span",[t._v("Back")])],1)],1),t._v(" "),t._m(0)])])]),t._v(" "),n("main",{staticClass:"main"},[n("div",{staticClass:"container"},[t.isHome||t.isTax?n("div",{staticClass:"home"},[n("div",{staticClass:"subscribe-box notification is-light card"},[n("div",{staticClass:"columns",staticStyle:{"align-items":"center"}},[n("div",{staticClass:"column"},[n("h4",{staticClass:"widget-title"},[t._v("Subscribe to get daily news")]),t._v(" "),n("b-checkbox",{attrs:{size:"is-small"}},[t._v("I agree to subscribe to the newsletter. See our Privacy\n                                Policy.\n                            ")])],1),t._v(" "),n("div",{staticClass:"column is-5"},[n("b-field",[n("b-input",{attrs:{icon:"email-outline",expanded:"",placeholder:"Your Email"}}),t._v(" "),n("div",{staticClass:"control"},[n("div",{staticClass:"button is-primary"},[t._v("Signup")])])],1)],1)])]),t._v(" "),t.isTax?n("h1",{staticClass:"title"},[n("b-icon",{attrs:{icon:"pound"}}),t._v(" "),n("span",[t._v(t._s(t.page.title))])],1):t._e(),t._v(" "),t.page.description?n("p",{staticClass:"subtitle"},[t._v(t._s(t.page.description))]):t._e(),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[t.loading?n("div",{staticClass:"items"},t._l(10,(function(i){return n("div",{key:i,staticClass:"item media"},[n("div",{staticClass:"media-content"},[n("b-skeleton"),t._v(" "),n("b-skeleton",{attrs:{width:t.rdNum(1,100)+"%"}}),t._v(" "),n("div",{staticClass:"meta"},[n("div",{staticClass:"buttons"},[n("div",{staticClass:"button is-small is-light"},[n("b-skeleton",{attrs:{height:"16",width:"60"}})],1),t._v(" "),n("div",{staticClass:"button is-small is-text"},[n("b-skeleton",{attrs:{height:"16",width:"80"}})],1)])])],1),t._v(" "),n("div",{staticClass:"media-right"},[n("b-skeleton",{attrs:{width:35,height:"50"}})],1)])})),0):n("div",{staticClass:"items"},t._l(t.response.results,(function(e){return n("item",{key:e.id,attrs:{"visible-items":t.visibleItems("list"),value:e}})})),1),t._v(" "),n("div",{staticClass:"level is-mobile"},[n("div",{staticClass:"level-left"},[n("div",{staticClass:"buttons"},[t.previous?n("n-link",{staticClass:"button",attrs:{to:"?page="+t.previous}},[n("b-icon",{attrs:{icon:"chevron-left"}}),t._v(" "),n("span",[t._v("Previous")])],1):t._e(),t._v(" "),t.next?n("n-link",{staticClass:"button",attrs:{to:"?page="+t.next}},[n("span",[t._v("Next")]),t._v(" "),n("b-icon",{attrs:{icon:"chevron-right"}})],1):t._e()],1)]),t._v(" "),n("div",{staticClass:"level-right"},[n("div",{staticClass:"tags has-addons"},[n("span",{staticClass:"tag is-large"},[t._v("Page")]),t._v(" "),n("span",{staticClass:"tag is-large is-primary"},[t._v(t._s(t.query.page))])])])])])])]),t._v(" "),n("div",{staticClass:"column is-4"},[n("div",{staticClass:"widget section"},[n("aside",{staticClass:"menu"},[n("p",{staticClass:"menu-label"},[t._v("Popular topics")]),t._v(" "),n("ul",{staticClass:"menu-list"},t._l(t.home.terms,(function(e){return n("li",{key:e.id},[n("n-link",{attrs:{to:"/"+e.slug}},[n("b-icon",{attrs:{icon:"plus",size:"is-small"}}),t._v(" "),n("span",[t._v(t._s(e.title))])],1)],1)})),0)])])])])]):t._e(),t._v(" "),t.isPost?n("div",{staticClass:"post"},[t.loading?n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("div",{staticClass:"item"},[n("b-skeleton"),t._v(" "),n("b-skeleton",{attrs:{width:t.rdNum(1,100)+"%"}}),t._v(" "),n("div",{staticStyle:{"margin-top":".5rem"}},[n("b-skeleton"),t._v(" "),n("b-skeleton",{attrs:{width:t.rdNum(1,100)+"%"}})],1),t._v(" "),n("div",[n("b-skeleton"),t._v(" "),n("b-skeleton"),t._v(" "),n("b-skeleton"),t._v(" "),n("b-skeleton"),t._v(" "),n("b-skeleton",{attrs:{width:t.rdNum(1,100)+"%"}})],1),t._v(" "),n("div",{staticClass:"meta"},[n("div",{staticClass:"buttons"},[n("div",{staticClass:"button is-small is-light"},[n("b-skeleton",{attrs:{height:"16",width:"60"}})],1),t._v(" "),n("div",{staticClass:"button is-small is-text"},[n("b-skeleton",{attrs:{height:"16",width:"80"}})],1)])]),t._v(" "),n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("comment-form")],1)]),t._v(" "),n("div",{staticClass:"section"},[n("h4",{staticClass:"widget-title"},[n("b-icon",{attrs:{size:"is-small",icon:"pound"}}),t._v(" "),n("span",[t._v("Tags")])],1),t._v(" "),n("div",{staticClass:"tags"},t._l(20,(function(i){return n("div",{key:i,staticClass:"tag"},[n("b-skeleton",{attrs:{width:""+t.rdNum(50,80)}})],1)})),0)])],1)]),t._v(" "),n("div",{staticClass:"column is-4"},[n("subscribe-box")],1)]):n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("div",{staticClass:"post-content"},[n("item",{attrs:{"is-full":"",value:t.post,"visible-items":t.visibleItems("detail")}},[n("div",{staticClass:"article"},[n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.toHTML(t.post.content))}}),t._v(" "),n("div",{staticClass:"columns is-mobile is-variable is-2"},[t.post.previous?n("div",{staticClass:"column"},[n("n-link",{staticClass:"button is-fullwidth is-light",attrs:{to:"/"+t.post.previous.post_type+"/"+t.post.previous.slug}},[n("b-icon",{attrs:{size:"is-small",icon:"chevron-left"}}),t._v(" "),n("span",[t._v("Previous")])],1)],1):t._e(),t._v(" "),t.post.next?n("div",{staticClass:"column"},[n("n-link",{staticClass:"button is-fullwidth is-light",attrs:{to:"/"+t.post.next.post_type+"/"+t.post.next.slug}},[n("span",[t._v("Next")]),t._v(" "),n("b-icon",{attrs:{size:"is-small",icon:"chevron-right"}})],1)],1):t._e()])]),t._v(" "),n("div",{staticClass:"section"},[n("div",{staticClass:"widget-title"},[n("b-icon",{attrs:{size:"is-small",icon:"pound"}}),t._v(" "),n("span",[t._v("Response")])],1),t._v(" "),t.publication.options.allow_comment?n("comment-form",{attrs:{post:t.post}}):t._e()],1),t._v(" "),t.hashTags.length?n("div",{staticClass:"section"},[n("div",{staticClass:"widget-title"},[n("b-icon",{attrs:{size:"is-small",icon:"pound"}}),t._v(" "),n("span",[t._v("Tags")])],1),t._v(" "),n("div",{staticClass:"tags"},t._l(t.hashTags,(function(e){return n("n-link",{key:e.id,staticClass:"tag",attrs:{to:"/"}},[n("span",[t._v(t._s(e.term.title))])])})),1)]):t._e()])],1),t._v(" "),t.post.related?n("div",{staticClass:"section"},[n("h4",{staticClass:"widget-title"},[t._v("Related")]),t._v(" "),t._l(t.post.related,(function(p){return n("div",{key:p.id,staticClass:"item media"},[n("n-link",{attrs:{to:"/"+p.post_type+"/"+p.slug}},[n("b-icon",{attrs:{size:"is-small",icon:"plus"}}),t._v(" "),n("span",[t._v(t._s(p.title.substr(0,100)))])],1)],1)}))],2):t._e()]),t._v(" "),n("div",{staticClass:"column is-4"},[n("subscribe-box")],1)])]):t._e()])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"navbar-end"},[e("div",{staticClass:"navbar-item"})])}],!1,null,null,null));e.default=h.exports},49:function(t,e,n){"use strict";var l={name:"Avatar",props:{canUpdate:{type:Boolean,default:!1},value:{default:null,type:Object},name:{default:null},icon:{default:"account-circle-outline",type:String}},data:function(){return{data:this.value,isUpdating:!1}},methods:{handleUpload:function(t){t.length&&(this.data=t[0],this.isUpdating=!1)}},watch:{data:function(){this.$emit("input",this.data)},value:function(){this.data=this.value}}},o=(n(216),n(4)),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image avatar relative",class:{initials:!(t.isUpdating||t.data&&t.data.sizes)}},[t.isUpdating?n("Upload",{staticClass:"upload",on:{done:t.handleUpload}}):t.data&&t.data.sizes?n("img",{staticClass:"is-round",attrs:{src:t.cleanURI(t.data.sizes.thumb_247_247?t.data.sizes.thumb_247_247:t.data.path),alt:""}}):n("b-icon",{attrs:{icon:t.icon}}),t._v(" "),t.canUpdate?n("div",{staticClass:"medal",on:{click:function(e){t.isUpdating=!t.isUpdating}}},[n("b-icon",{attrs:{size:"is-small",icon:t.isUpdating?"close":"upload"}})],1):t._e(),t._v(" "),t.canUpdate&&t.data?n("div",{staticClass:"delete",on:{click:function(e){t.data=null}}}):t._e()],1)}),[],!1,null,null,null);e.a=component.exports},57:function(t,e,n){"use strict";var l={name:"NuxtError",props:{error:{type:Object,default:null}},computed:{statusCode:function(){return this.error&&this.error.statusCode||500},message:function(){return this.error.message||"Error"}},head:function(){return{title:this.message,meta:[{name:"viewport",content:"width=device-width,initial-scale=1.0,minimum-scale=1.0"}]}}},o=(n(189),n(4)),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"__nuxt-error-page"},[n("div",{staticClass:"error"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"90",height:"90",fill:"#DBE1EC",viewBox:"0 0 48 48"}},[n("path",{attrs:{d:"M22 30h4v4h-4zm0-16h4v12h-4zm1.99-10C12.94 4 4 12.95 4 24s8.94 20 19.99 20S44 35.05 44 24 35.04 4 23.99 4zM24 40c-8.84 0-16-7.16-16-16S15.16 8 24 8s16 7.16 16 16-7.16 16-16 16z"}})]),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(t.message))]),t._v(" "),404===t.statusCode?n("p",{staticClass:"description"},[n("NuxtLink",{staticClass:"error-link",attrs:{to:"/"}},[t._v("Back to the home page")])],1):t._e(),t._v(" "),t._m(0)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("a",{attrs:{href:"https://nuxtjs.org",target:"_blank",rel:"noopener"}},[this._v("Nuxt.js")])])}],!1,null,null,null);e.a=component.exports},74:function(t,e,n){},75:function(t,e,n){},76:function(t,e,n){},77:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){}}]);