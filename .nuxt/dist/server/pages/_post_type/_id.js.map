{"version":3,"file":"pages/_post_type/_id.js","sources":["webpack:///./pages/_post_type/_id.vue?c942","webpack:///./pages/_post_type/_id.vue","webpack:///./pages/_post_type/_id.vue?b1ec","webpack:///./pages/_post_type/_id.vue?f72d"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"main\"},[_vm._ssrNode(\"<div class=\\\"container\\\" data-v-56f1ad4a>\",\"</div>\",[(_vm.isHome || _vm.isTax)?_vm._ssrNode(\"<div class=\\\"home\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"subscribe-box notification is-light card\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"columns\\\" style=\\\"align-items: center;\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"column\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<h4 class=\\\"widget-title\\\" data-v-56f1ad4a>Subscribe to get daily news</h4> \"),_c('b-checkbox',{attrs:{\"size\":\"is-small\"}},[_vm._v(\"I agree to subscribe to the newsletter. See our Privacy\\n                            Policy.\\n                        \")])],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"column\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-field',[_c('b-input',{attrs:{\"icon\":\"email-outline\",\"expanded\":\"\",\"placeholder\":\"Your Email\"}}),_vm._v(\" \"),_c('div',{staticClass:\"control\"},[_c('div',{staticClass:\"button is-primary\"},[_vm._v(\"Signup\")])])],1)],1)],2)]),_vm._ssrNode(\" \"),(_vm.loading)?_vm._ssrNode(\"<div class=\\\"items\\\" data-v-56f1ad4a>\",\"</div>\",_vm._l((10),function(i){return _vm._ssrNode(\"<div class=\\\"item media\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"media-content\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton'),_vm._ssrNode(\" \"),_c('b-skeleton',{attrs:{\"width\":((_vm.rdNum(1, 100)) + \"%\")}}),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"meta\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"buttons\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"button is-small is-light\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton',{attrs:{\"height\":\"16\",\"width\":\"60\"}})],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"button is-small is-text\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton',{attrs:{\"height\":\"16\",\"width\":\"80\"}})],1)],2)])],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"media-right\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton',{attrs:{\"width\":35,\"height\":\"50\"}})],1)],2)}),0):_vm._ssrNode(\"<div class=\\\"items\\\" data-v-56f1ad4a>\",\"</div>\",_vm._l((_vm.response.results),function(item){return _c('item',{key:item.id,attrs:{\"visible-items\":_vm.visibleItems('list'),\"value\":item}})}),1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"level is-mobile\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"level-left\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"buttons\\\" data-v-56f1ad4a>\",\"</div>\",[(_vm.previous)?_c('n-link',{staticClass:\"button\",attrs:{\"to\":(\"?page=\" + _vm.previous)}},[_c('b-icon',{attrs:{\"icon\":\"chevron-left\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Previous\")])],1):_vm._e(),_vm._ssrNode(\" \"),(_vm.next)?_c('n-link',{staticClass:\"button\",attrs:{\"to\":(\"?page=\" + _vm.next)}},[_c('span',[_vm._v(\"Next\")]),_vm._v(\" \"),_c('b-icon',{attrs:{\"icon\":\"chevron-right\"}})],1):_vm._e()],2)]),_vm._ssrNode(\" <div class=\\\"level-right\\\" data-v-56f1ad4a><div class=\\\"tags has-addons\\\" data-v-56f1ad4a><span class=\\\"tag is-large\\\" data-v-56f1ad4a>Page</span> <span class=\\\"tag is-large is-primary\\\" data-v-56f1ad4a>\"+_vm._ssrEscape(_vm._s(_vm.query.page))+\"</span></div></div>\")],2)],2):_vm._e(),_vm._ssrNode(\" \"),(_vm.isPost)?_vm._ssrNode(\"<div class=\\\"post\\\" data-v-56f1ad4a>\",\"</div>\",[(_vm.loading)?_vm._ssrNode(\"<div class=\\\"columns\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"column\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"item\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton'),_vm._ssrNode(\" \"),_c('b-skeleton',{attrs:{\"width\":((_vm.rdNum(1, 100)) + \"%\")}}),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"notification\\\" style=\\\"margin-top: 1rem;\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton'),_vm._ssrNode(\" \"),_c('b-skeleton'),_vm._ssrNode(\" \"),_c('b-skeleton',{attrs:{\"width\":((_vm.rdNum(1, 100)) + \"%\")}})],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton'),_vm._ssrNode(\" \"),_c('b-skeleton'),_vm._ssrNode(\" \"),_c('b-skeleton'),_vm._ssrNode(\" \"),_c('b-skeleton'),_vm._ssrNode(\" \"),_c('b-skeleton',{attrs:{\"width\":((_vm.rdNum(1, 100)) + \"%\")}})],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"meta\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"buttons\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"button is-small is-light\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton',{attrs:{\"height\":\"16\",\"width\":\"60\"}})],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"button is-small is-text\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton',{attrs:{\"height\":\"16\",\"width\":\"80\"}})],1)],2)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"card\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-content\\\" data-v-56f1ad4a>\",\"</div>\",[_c('comment-form')],1)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"section\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<h4 class=\\\"widget-title\\\" data-v-56f1ad4a>\",\"</h4>\",[_c('b-icon',{attrs:{\"size\":\"is-small\",\"icon\":\"pound\"}}),_vm._ssrNode(\" <span data-v-56f1ad4a>Tags</span>\")],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"tags\\\" data-v-56f1ad4a>\",\"</div>\",_vm._l((20),function(i){return _vm._ssrNode(\"<div class=\\\"tag\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton',{attrs:{\"width\":(\"\" + (_vm.rdNum(50, 80)))}})],1)}),0)],2)],2)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"column is-4\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"section\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"widget-title\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton',{attrs:{\"width\":\"60\"}})],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"card\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-content\\\" data-v-56f1ad4a>\",\"</div>\",_vm._l((5),function(i){return _vm._ssrNode(\"<div class=\\\"item media\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"media-left\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-icon',{attrs:{\"size\":\"is-small\",\"icon\":\"plus\"}})],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"media-content\\\" data-v-56f1ad4a>\",\"</div>\",[_c('b-skeleton'),_vm._ssrNode(\" \"),_c('b-skeleton',{attrs:{\"width\":((_vm.rdNum(1, 100)) + \"%\")}})],2)],2)}),0)])],2)])],2):_vm._ssrNode(\"<div class=\\\"columns\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"column\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"post-content\\\" data-v-56f1ad4a>\",\"</div>\",[_c('item',{attrs:{\"is-full\":\"\",\"value\":_vm.post,\"visible-items\":_vm.visibleItems('detail')}},[_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.toHTML(_vm.post.content))}}),_vm._v(\" \"),(_vm.publication.options['allow_comment'])?_c('comment-form',{attrs:{\"post\":_vm.post}}):_vm._e(),_vm._v(\" \"),(_vm.hashTags.length)?_c('div',{staticClass:\"section\"},[_c('div',{staticClass:\"widget-title\"},[_c('b-icon',{attrs:{\"size\":\"is-small\",\"icon\":\"pound\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Tags\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"tags\"},_vm._l((_vm.hashTags),function(tax){return _c('n-link',{key:tax.id,staticClass:\"tag\",attrs:{\"to\":\"/\"}},[_c('span',[_vm._v(_vm._s(tax.term.title))])])}),1)]):_vm._e()],1)],1)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"column is-4\\\" data-v-56f1ad4a>\",\"</div>\",[(_vm.post['related'])?_vm._ssrNode(\"<div class=\\\"section\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<h4 class=\\\"widget-title\\\" data-v-56f1ad4a>Related</h4> \"),_vm._ssrNode(\"<div class=\\\"card\\\" data-v-56f1ad4a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-content\\\" data-v-56f1ad4a>\",\"</div>\",_vm._l((_vm.post['related']),function(p){return _vm._ssrNode(\"<div class=\\\"item media\\\" data-v-56f1ad4a>\",\"</div>\",[_c('n-link',{attrs:{\"to\":(\"/\" + (p['post_type']) + \"/\" + (p.slug))}},[_c('b-icon',{attrs:{\"size\":\"is-small\",\"icon\":\"plus\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(p.title.substr(0, 100)))])],1)],1)}),0)])],2):_vm._e()])],2)]):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nconst parseHostname = function (href) {\n    let l = document.createElement(\"a\");\n    l.href = href;\n    return l;\n};\n\nexport default {\n    name: \"Master\",\n    data() {\n        return {\n            response: {\n                results: [],\n                count: 0\n            },\n            post: {},\n            taxonomy: {},\n            query: {\n                page_size: 10,\n                page: 1,\n                show_cms: true\n            },\n            loading: false\n        }\n    },\n    head() {\n        let title = \"CMS\";\n        let destination = null;\n        if (this.publication) {\n            if (this.isHome) {\n                title = this.publication.title;\n                destination = this.publication.description;\n            } else if (this.isTax) {\n\n            } else if (this.isPost && this.post) {\n                title = this.post.title;\n                destination = this.post.description;\n            }\n        }\n        return {\n            title: title + ` - ${this.publication.host}`,\n            meta: [\n                {\n                    hid: 'og:title',\n                    name: 'og:title',\n                    content: title\n                },\n                {\n                    hid: 'description',\n                    name: 'description',\n                    content: destination\n                },\n                {\n                    hid: 'og:description',\n                    name: 'og:description',\n                    content: destination\n                },\n                {\n                    hid: 'og:url',\n                    name: 'og:url',\n                    content: `${this.publication.url}/${this.$route.path}`\n                },\n                {\n                    hid: 'og:type',\n                    name: 'og:type',\n                    content: this.isHome ? 'website' : 'article'\n                },\n                ...this.media ? [{\n                    hid: 'og:image',\n                    name: 'og:image',\n                    content: this.media.sizes['full_size']\n                }] : []\n            ]\n        }\n    },\n    computed: {\n        isHome() {\n            return !Boolean(this.$route.params.post_type && this.$route.params.id)\n        },\n        isTax() {\n            return Boolean(this.$route.params.post_type) && typeof this.$route.params.id === 'undefined';\n        },\n        isPost() {\n            return Boolean(this.$route.params.id)\n        },\n        totalPage() {\n            return this.response.count / (this.query['page_size'] ? this.query['page_size'] : 10)\n        },\n        next() {\n            if (this.query.page < this.totalPage) {\n                return this.query.page + 1;\n            }\n            return 0\n        },\n        previous() {\n            if (this.query.page > 1) {\n                return this.query.page - 1;\n            }\n            return 0\n        },\n        hashTags() {\n            return this.post['terms'] ? this.post['terms'].filter(x => x.taxonomy === 'tag') : [];\n        },\n        publication() {\n            return this.$store.state.config.publication\n        },\n        media() {\n            if (this.post) {\n                if (this.post.media) {\n                    return this.post.media;\n                } else if (this.post['medias'] && this.post['medias'].length) {\n                    return this.post['medias'][0];\n                }\n            }\n            if (this.publication && this.publication.media) {\n                return this.publication.media;\n            }\n            return null\n        }\n    },\n    async fetch() {\n        this.loading = true;\n        const p = this.$route.params;\n        const publication = this.publication;\n        if (publication) {\n            const uri = `/pub-${publication.id}`;\n            if (publication.options['default_post_type']) {\n                this.query.type = publication.options['default_post_type'];\n            }\n            const q = this.$route.query\n            this.query.page = q.page ? Number.parseInt(q.page) : 1;\n            if (p.post_type) {\n                this.query.type = p.post_type\n            }\n            if (!p.id) {\n                this.response = await this.$axios.$get(`${uri}/posts/`, {\n                    params: this.query\n                });\n            } else {\n                this.post = await this.$axios.$get(`${uri}/posts/${p.id}/`, {\n                    params: {\n                        show_cms: true\n                    }\n                });\n            }\n        }\n        this.loading = false;\n    },\n    watch: {\n        '$route.query'() {\n            this.$fetch();\n            this.toTop();\n        }\n    },\n    methods: {\n        visibleItems(flag) {\n            return [\n                ...['description', 'hashtag'],\n                ...this.publication && this.publication.options['allow_vote'] ? ['vote'] : []\n            ]\n        }\n    }\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_id.vue?vue&type=template&id=56f1ad4a&scoped=true&\"\nimport script from \"./_id.vue?vue&type=script&lang=js&\"\nexport * from \"./_id.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"56f1ad4a\",\n  \"78d6d657\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAZA;AAcA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AA5BA;AAmCA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AA5CA;AACA;AA4CA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AADA;AADA;AAKA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAMA;AACA;AACA;AAIA;AACA;AAPA;AAnJA;;ACxLA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}