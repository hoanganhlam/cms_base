{"version":3,"file":"pages/_post_type/_id.js","sources":["webpack:///./pages/_post_type/_id.vue?f079","webpack:///./pages/_post_type/_id.vue","webpack:///./pages/_post_type/_id.vue?b1ec","webpack:///./pages/_post_type/_id.vue?f72d"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"main\"},[_vm._ssrNode(\"<div class=\\\"container\\\" data-v-0c23aeac>\",\"</div>\",[(_vm.isHome || _vm.isTax)?_vm._ssrNode(\"<div class=\\\"home\\\" data-v-0c23aeac>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"notification\\\" data-v-0c23aeac>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"columns\\\" style=\\\"align-items: center;\\\" data-v-0c23aeac>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"column\\\" data-v-0c23aeac>\",\"</div>\",[_vm._ssrNode(\"<h4 class=\\\"is-bold\\\" data-v-0c23aeac>Subscribe to get daily news</h4> \"),_c('b-checkbox',{attrs:{\"size\":\"is-small\"}},[_vm._v(\"I agree to subscribe to the newsletter. See our Privacy\\n                            Policy.\\n                        \")])],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"column\\\" data-v-0c23aeac>\",\"</div>\",[_c('b-field',[_c('b-input',{attrs:{\"icon\":\"email-outline\",\"expanded\":\"\",\"placeholder\":\"Your Email\"}}),_vm._v(\" \"),_c('div',{staticClass:\"control\"},[_c('div',{staticClass:\"button is-primary\"},[_vm._v(\"Signup\")])])],1)],1)],2)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"items\\\" data-v-0c23aeac>\",\"</div>\",_vm._l((_vm.response.results),function(item){return _c('item',{key:item.id,attrs:{\"visible-items\":['vote', 'meta'],\"value\":item}})}),1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"level is-mobile\\\" data-v-0c23aeac>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"level-left\\\" data-v-0c23aeac>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"buttons\\\" data-v-0c23aeac>\",\"</div>\",[(_vm.previous)?_c('n-link',{staticClass:\"button\",attrs:{\"to\":(\"?page=\" + _vm.previous)}},[_c('b-icon',{attrs:{\"icon\":\"chevron-left\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Previous\")])],1):_vm._e(),_vm._ssrNode(\" \"),(_vm.next)?_c('n-link',{staticClass:\"button\",attrs:{\"to\":(\"?page=\" + _vm.next)}},[_c('span',[_vm._v(\"Next\")]),_vm._v(\" \"),_c('b-icon',{attrs:{\"icon\":\"chevron-right\"}})],1):_vm._e()],2)]),_vm._ssrNode(\" <div class=\\\"level-right\\\" data-v-0c23aeac><div class=\\\"tags has-addons\\\" data-v-0c23aeac><span class=\\\"tag is-large\\\" data-v-0c23aeac>Page</span> <span class=\\\"tag is-large is-primary\\\" data-v-0c23aeac>\"+_vm._ssrEscape(_vm._s(_vm.query.page))+\"</span></div></div>\")],2)],2):_vm._e(),_vm._ssrNode(\" \"),(_vm.isPost)?_vm._ssrNode(\"<div class=\\\"post\\\" data-v-0c23aeac>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"columns\\\" data-v-0c23aeac>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"column\\\" data-v-0c23aeac>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"post-content\\\" data-v-0c23aeac>\",\"</div>\",[_c('item',{attrs:{\"is-full\":\"\",\"value\":_vm.post,\"visible-items\":['vote', 'meta', 'description', 'hashtag']}},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-content\"},[_c('comment-form')],1)]),_vm._v(\" \"),_c('div',{staticClass:\"section\"},[_c('h4',{staticClass:\"widget-title\"},[_c('b-icon',{attrs:{\"size\":\"is-small\",\"icon\":\"pound\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Tags\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"tags\"},_vm._l((_vm.hashTags),function(tax){return _c('n-link',{key:tax.id,staticClass:\"tag\",attrs:{\"to\":\"/\"}},[_c('span',[_vm._v(_vm._s(tax.term.title))])])}),1)])])],1)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"column is-4\\\" data-v-0c23aeac>\",\"</div>\",[(_vm.post['related'])?_vm._ssrNode(\"<div class=\\\"section\\\" data-v-0c23aeac>\",\"</div>\",[_vm._ssrNode(\"<h4 class=\\\"widget-title\\\" data-v-0c23aeac>Related</h4> \"),_vm._ssrNode(\"<div class=\\\"card\\\" data-v-0c23aeac>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-content\\\" data-v-0c23aeac>\",\"</div>\",_vm._l((_vm.post['related']),function(p){return _vm._ssrNode(\"<div class=\\\"item media\\\" data-v-0c23aeac>\",\"</div>\",[_c('n-link',{attrs:{\"to\":(\"/\" + (p['post_type']) + \"/\" + (p.slug))}},[_c('b-icon',{attrs:{\"size\":\"is-small\",\"icon\":\"plus\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(p.title.substr(0, 100)))])],1)],1)}),0)])],2):_vm._e()])],2)]):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nconst parseHostname = function (href) {\n    let l = document.createElement(\"a\");\n    l.href = href;\n    return l;\n};\n\nexport default {\n    name: \"Master\",\n    data() {\n        return {\n            response: {\n                results: [],\n                count: 0\n            },\n            post: {},\n            taxonomy: {},\n            query: {\n                page_size: 10,\n                page: 1,\n                type: 'post'\n            }\n        }\n    },\n    head() {\n        let title = \"CMS\";\n        if (this.publication) {\n            if (this.isHome) {\n                title = this.publication.title;\n            } else if (this.isTax) {\n\n            } else if (this.isPost && this.post) {\n                title = this.post.title;\n            }\n        }\n        return {\n            title: title\n        }\n    },\n    computed: {\n        isHome() {\n            return !Boolean(this.$route.params.post_type && this.$route.params.id)\n        },\n        isTax() {\n            return Boolean(this.$route.params.post_type) && typeof this.$route.params.id === 'undefined';\n        },\n        isPost() {\n            return Boolean(this.$route.params.id)\n        },\n        totalPage() {\n            return this.response.count / (this.query['page_size'] ? this.query['page_size'] : 10)\n        },\n        next() {\n            if (this.query.page < this.totalPage) {\n                return this.query.page + 1;\n            }\n            return 0\n        },\n        previous() {\n            if (this.query.page > 1) {\n                return this.query.page - 1;\n            }\n            return 0\n        },\n        hashTags() {\n            return this.post['terms'] ? this.post['terms'].filter(x => x.taxonomy === 'tag') : [];\n        },\n        publication() {\n            return this.$store.state.config.publication\n        }\n    },\n    async asyncData({req, res}) {\n        let hostname = null;\n        if (process['server']) {\n            hostname = req.headers.host\n        } else {\n            let or = parseHostname(window.location.href)\n            hostname = or.hostname + (or.port ? `:${or.port}` : '');\n        }\n        if (hostname.includes('localhost')) {\n            hostname = 'pushfact.com'\n        }\n        return {host: hostname}\n    },\n    async fetch() {\n        const p = this.$route.params;\n        const publication = await this.$axios.$get(`/pub/?host=` + this.host);\n        if (publication) {\n            const uri = `/pub-${publication.id}`;\n            if (publication.options['default_post_type']) {\n                this.query.type = publication.options['default_post_type'];\n            }\n            await this.$store.commit('config/SET_PUBLICATION', publication);\n            const q = this.$route.query\n            this.query.page = q.page ? Number.parseInt(q.page) : 1;\n            if (p.post_type) {\n                this.query.type = p.post_type\n            }\n            if (!p.id) {\n                this.response = await this.$axios.$get(`${uri}/posts/`, {\n                    params: this.query\n                });\n            } else {\n                this.post = await this.$axios.$get(`${uri}/posts/${p.id}/`);\n            }\n        }\n    },\n    watch: {\n        '$route.query': '$fetch'\n    },\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_id.vue?vue&type=template&id=0c23aeac&scoped=true&\"\nimport script from \"./_id.vue?vue&type=script&lang=js&\"\nexport * from \"./_id.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"0c23aeac\",\n  \"78d6d657\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAHA;AAPA;AAaA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AA/BA;AACA;AA+BA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA,aAGA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AApGA;;ACnGA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}