exports.ids = [2];
exports.modules = {

/***/ 45:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(48);
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to SSR context
var add = __webpack_require__(4).default
module.exports.__inject__ = function (context) {
  add("1eeebaa6", content, true, context)
};

/***/ }),

/***/ 46:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(50);
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to SSR context
var add = __webpack_require__(4).default
module.exports.__inject__ = function (context) {
  add("70cb11c6", content, true, context)
};

/***/ }),

/***/ 47:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_MediaSelect_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(45);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_MediaSelect_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_MediaSelect_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_MediaSelect_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_MediaSelect_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_MediaSelect_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 48:
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(3);
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".media-select .upload{height:128px;width:100%}.media-select .upload .upload-draggable{border-radius:0;width:100%}.media-select .image.is-1by1.empty .wrapper{border:1px solid #ddd}.media-select .image.is-1by1 .wrapper{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ 49:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_JsonArray_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(46);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_JsonArray_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_JsonArray_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_JsonArray_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_JsonArray_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_7_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_JsonArray_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 50:
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(3);
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".card .card:not(.collapse):not(:last-child){margin-bottom:0;border-bottom:0}.card .card .card{box-shadow:none;border:1px solid #eee}.card .card .card .card-content{padding:.5rem .75rem}.j-array .card-header-icon,.j-array .card-header-title{padding:.45rem 1rem}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ 51:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// NAMESPACE OBJECT: ./helper/data_types.js
var data_types_namespaceObject = {};
__webpack_require__.r(data_types_namespaceObject);
__webpack_require__.d(data_types_namespaceObject, "TEXT", function() { return TEXT; });
__webpack_require__.d(data_types_namespaceObject, "NUMBER", function() { return NUMBER; });
__webpack_require__.d(data_types_namespaceObject, "JSON", function() { return JSON; });
__webpack_require__.d(data_types_namespaceObject, "DATA", function() { return DATA; });
__webpack_require__.d(data_types_namespaceObject, "J_ARRAY", function() { return J_ARRAY; });
__webpack_require__.d(data_types_namespaceObject, "T_ARRAY", function() { return T_ARRAY; });
__webpack_require__.d(data_types_namespaceObject, "DATETIME", function() { return DATETIME; });
__webpack_require__.d(data_types_namespaceObject, "BOOLEAN", function() { return BOOLEAN; });
__webpack_require__.d(data_types_namespaceObject, "SELECT", function() { return SELECT; });
__webpack_require__.d(data_types_namespaceObject, "MEDIA", function() { return MEDIA; });
__webpack_require__.d(data_types_namespaceObject, "EDITOR", function() { return EDITOR; });

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./pages/post/index.vue?vue&type=template&id=304dc7b8&scoped=true&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.publication)?_c('main',{staticClass:"main"},[_vm._ssrNode("<div class=\"container\" data-v-304dc7b8>","</div>",[_c('b-field',[_c('div',{staticClass:"control"},[_c('b-dropdown',{model:{value:(_vm.form.post_type),callback:function ($$v) {_vm.$set(_vm.form, "post_type", $$v)},expression:"form.post_type"}},[_c('div',{staticClass:"button",attrs:{"slot":"trigger"},slot:"trigger"},[_c('span',{staticClass:"is-capitalized"},[_vm._v(_vm._s(_vm.form.post_type))])]),_vm._v(" "),_vm._l((_vm.publication.options['post_types']),function(t){return _c('b-dropdown-item',{key:t.label,attrs:{"value":t.label}},[_c('span',[_vm._v(_vm._s(t.title))])])})],2)],1),_vm._v(" "),_c('b-input',{attrs:{"expanded":"","placeholder":"Title"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, "title", $$v)},expression:"form.title"}}),_vm._v(" "),_c('div',{staticClass:"control"},[_c('div',{staticClass:"button",class:{'is-success': _vm.showOption},on:{"click":function($event){_vm.showOption = !_vm.showOption}}},[_c('b-icon',{attrs:{"size":"is-small","icon":"cogs"}})],1)])],1),_vm._ssrNode(" "),(_vm.form.post_type === 'link')?_c('b-field',[_c('b-input',{attrs:{"expanded":"","icon":"link","placeholder":"https://fournalist.com"},model:{value:(_vm.url),callback:function ($$v) {_vm.url=$$v},expression:"url"}}),_vm._v(" "),_c('div',{staticClass:"control"},[_c('div',{staticClass:"button",on:{"click":_vm.fetchURL}},[_vm._v("Fetch")])])],1):_vm._e(),_vm._ssrNode(" "),_vm._ssrNode("<div style=\"margin-bottom: .75rem;\" data-v-304dc7b8>","</div>",[_c('transition',{attrs:{"name":"fade"}},[(_vm.showOption)?_c('div',[(_vm.field_addons.length)?_c('div',{staticClass:"card"},[_c('div',{staticClass:"card-content"},_vm._l((_vm.field_addons),function(sch){return _c('div',{key:sch.field},[_c('s-field',{attrs:{"schema":sch,"value":_vm.form['meta'][sch.field]},on:{"input":function($event){_vm.form['meta'][sch.field] = $event}}})],1)}),0)]):_vm._e(),_vm._v(" "),_c('b-field',{attrs:{"label":"Taxonomy","label-position":"on-border"}},[_c('div',{staticClass:"card"},[_c('div',{staticClass:"card-content"},_vm._l((_vm.publication.options['taxonomies']),function(tax){return _c('b-field',{key:tax.id},[_c('TaxSelector',{attrs:{"size":"is-small","taxonomy":tax.label,"value":_vm.form['terms'] ? _vm.form['terms'] : []},on:{"select":_vm.addTerm}})],1)}),1)])])],1):_vm._e()]),_vm._ssrNode(" "),_c('transition',[(!_vm.showOption)?_c('div',[_c('b-field',[_c('b-input',{attrs:{"placeholder":"Description","rows":2,"type":"textarea"},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, "description", $$v)},expression:"form.description"}})],1),_vm._v(" "),_c('b-field',[_c('editor',{attrs:{"height":"500"},model:{value:(_vm.form.content),callback:function ($$v) {_vm.$set(_vm.form, "content", $$v)},expression:"form.content"}})],1)],1):_vm._e()])],2),_vm._ssrNode(" "),_vm._ssrNode("<div class=\"level is-mobile\" data-v-304dc7b8>","</div>",[_vm._ssrNode("<div class=\"level-left\" data-v-304dc7b8>","</div>",[_vm._ssrNode("<div class=\"button\" data-v-304dc7b8>","</div>",[_c('user',{attrs:{"value":_vm.currentUser,"avatar-size":"is-24x24"}})],1)]),_vm._ssrNode(" <div class=\"level-right\" data-v-304dc7b8><div class=\"button is-dark\" data-v-304dc7b8>Submit</div></div>")],2)],2)]):_vm._e()}
var staticRenderFns = []


// CONCATENATED MODULE: ./pages/post/index.vue?vue&type=template&id=304dc7b8&scoped=true&

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./components/Editor.vue?vue&type=template&id=ef72aa2a&
var Editorvue_type_template_id_ef72aa2a_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"content"},[_c('tiny-editor',{attrs:{"api-key":"sgdhe7czf3wgmsipn054ql44mi1ce2khbevpw9atwsq3ir1q","init":_vm.editorConfig},model:{value:(_vm.editorData),callback:function ($$v) {_vm.editorData=$$v},expression:"editorData"}})],1)}
var Editorvue_type_template_id_ef72aa2a_staticRenderFns = []


// CONCATENATED MODULE: ./components/Editor.vue?vue&type=template&id=ef72aa2a&

// EXTERNAL MODULE: external "@tinymce/tinymce-vue"
var tinymce_vue_ = __webpack_require__(42);
var tinymce_vue_default = /*#__PURE__*/__webpack_require__.n(tinymce_vue_);

// EXTERNAL MODULE: external "turndown"
var external_turndown_ = __webpack_require__(43);
var external_turndown_default = /*#__PURE__*/__webpack_require__.n(external_turndown_);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./components/Editor.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//


const turndown = new external_turndown_default.a();
/* harmony default export */ var Editorvue_type_script_lang_js_ = ({
  name: "Editor",
  components: {
    'tiny-editor': tinymce_vue_default.a
  },
  props: {
    value: {},
    placeholder: {},
    changed: {},
    height: {
      default: 250
    }
  },

  data() {
    return {
      editor: null,
      editorData: null,
      editorConfig: {
        height: this.height,
        menubar: false,
        plugins: ['advlist autolink lists link image charmap print preview anchor', 'searchreplace visualblocks code fullscreen', 'insertdatetime media table paste code help wordcount'],
        toolbar: 'undo redo | formatselect | bold italic backcolor | \
                    alignleft aligncenter alignright alignjustify | \
                    bullist numlist outdent indent | removeformat | help'
      },
      turnDown: null
    };
  },

  methods: {},
  watch: {
    editorData() {
      this.$emit('input', turndown.turndown(this.editorData));
    },

    changed() {
      this.editorData = this.toHTML(this.value);
    }

  },

  created() {
    this.editorData = this.toHTML(this.value);
  }

});
// CONCATENATED MODULE: ./components/Editor.vue?vue&type=script&lang=js&
 /* harmony default export */ var components_Editorvue_type_script_lang_js_ = (Editorvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(1);

// CONCATENATED MODULE: ./components/Editor.vue





/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  components_Editorvue_type_script_lang_js_,
  Editorvue_type_template_id_ef72aa2a_render,
  Editorvue_type_template_id_ef72aa2a_staticRenderFns,
  false,
  null,
  null,
  "706c0aaf"
  
)

/* harmony default export */ var Editor = (component.exports);
// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./components/field/TaxSelector.vue?vue&type=template&id=2ced73d4&scoped=true&
var TaxSelectorvue_type_template_id_2ced73d4_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-taginput',{attrs:{"value":_vm.data,"data":_vm.response.results,"autocomplete":"","allow-new":"","field":"term.title","icon":"label","placeholder":("Add a " + _vm.taxonomy),"size":_vm.size},on:{"add":_vm.handleInput,"remove":_vm.handleInput,"typing":_vm.fetch},scopedSlots:_vm._u([{key:"default",fn:function(props){return [_vm._v(_vm._s(props.option['term'].title))]}}])},[_vm._v(" "),_c('template',{slot:"empty"},[_vm._v("There are no items")])],2)}
var TaxSelectorvue_type_template_id_2ced73d4_scoped_true_staticRenderFns = []


// CONCATENATED MODULE: ./components/field/TaxSelector.vue?vue&type=template&id=2ced73d4&scoped=true&

// EXTERNAL MODULE: external "lodash"
var external_lodash_ = __webpack_require__(41);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./components/field/TaxSelector.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

/* harmony default export */ var TaxSelectorvue_type_script_lang_js_ = ({
  name: "TaxSelector",
  props: {
    value: {
      type: Array,
      require: true,
      default: () => []
    },
    taxonomy: {
      default: 'tag',
      type: String
    },
    size: String
  },

  data() {
    return {
      data: [],
      response: {
        results: [],
        count: 0
      }
    };
  },

  computed: {
    uri() {
      return `/pub-${this.$store.state.config.publication.id}/taxonomies/`;
    }

  },
  methods: {
    init() {
      this.data = this.value.filter(x => x.taxonomy === this.taxonomy);
    },

    fetch: Object(external_lodash_["debounce"])(async function (text) {
      this.response = await this.$axios.$get(this.uri, {
        params: {
          search: text,
          taxonomy: this.taxonomy
        }
      });
    }),

    async handleInput(data) {
      if (typeof data === 'string') {
        data = await this.$axios.$post(this.uri, {
          term_title: data,
          taxonomy: this.taxonomy,
          publication: this.$store.state.config.publication.id
        });
      }

      if (data && data.id) {
        this.$emit('select', data);
      }
    }

  },
  watch: {
    value: {
      deep: true,
      handler: function () {
        this.init();
      }
    }
  },

  created() {
    this.init();
  }

});
// CONCATENATED MODULE: ./components/field/TaxSelector.vue?vue&type=script&lang=js&
 /* harmony default export */ var field_TaxSelectorvue_type_script_lang_js_ = (TaxSelectorvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./components/field/TaxSelector.vue



function injectStyles (context) {
  
  
}

/* normalize component */

var TaxSelector_component = Object(componentNormalizer["a" /* default */])(
  field_TaxSelectorvue_type_script_lang_js_,
  TaxSelectorvue_type_template_id_2ced73d4_scoped_true_render,
  TaxSelectorvue_type_template_id_2ced73d4_scoped_true_staticRenderFns,
  false,
  injectStyles,
  "2ced73d4",
  "15f867c3"
  
)

/* harmony default export */ var TaxSelector = (TaxSelector_component.exports);
// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./components/field/MediaSelect.vue?vue&type=template&id=301d6832&
var MediaSelectvue_type_template_id_301d6832_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode("<div class=\"columns is-multiline\">","</div>",[(_vm.multiple || !_vm.shows.length)?_vm._ssrNode("<div"+(_vm._ssrClass(null,("column " + _vm.column)))+">","</div>",[_vm._ssrNode("<div class=\"avatar is-bordered initials v-center clickable image is-1by1\">","</div>",[_vm._ssrNode("<div class=\"wrapper clickable\">","</div>",[_c('b-icon',{attrs:{"icon":"image-outline"}})],1)])]):_vm._e(),_vm._ssrNode(" "),_vm._l((_vm.shows),function(s,index){return (s)?_vm._ssrNode("<div"+(_vm._ssrClass(null,("column " + _vm.column)))+">","</div>",[_vm._ssrNode("<div class=\"avatar v-center clickable image is-1by1\">","</div>",[_vm._ssrNode("<div class=\"wrapper clickable\">","</div>",[(s)?_vm._ssrNode("<img"+(_vm._ssrAttr("src",s.sizes['thumb_247_247']))+(_vm._ssrAttr("alt",s.title))+">","</img>"):_c('b-icon',{attrs:{"icon":"image-outline"}}),_vm._ssrNode(" <div class=\"delete\"></div>")],2)])]):_vm._e()})],2),_vm._ssrNode(" "),(_vm.isShow)?_vm._ssrNode("<div>","</div>",[_vm._ssrNode("<div class=\"media-select\">","</div>",[_c('b-field',[_c('div',{staticClass:"level is-mobile"},[_c('div',{staticClass:"level-left"},[_c('h4',{staticClass:"widget-title"},[_vm._v("Media Browser")])]),_vm._v(" "),_c('div',{staticClass:"level-right"},[_c('b-icon',{staticClass:"clickable",attrs:{"size":"is-small","icon":"close"},nativeOn:{"click":function($event){_vm.isShow = false}}})],1)])]),_vm._ssrNode(" "),_c('b-field',[_c('upload',{attrs:{"multiple":"","app":_vm.query.pub},on:{"done":_vm.uploaded}})],1),_vm._ssrNode(" "),_c('b-field',[_c('div',{staticClass:"level"},[_c('div',{staticClass:"level-left"},[_c('b-input',{attrs:{"icon":"magnify","placeholder":"Search"}})],1),_vm._v(" "),_c('div',{staticClass:"level-right"},[_c('b-pagination',{attrs:{"total":_vm.response.count,"current":_vm.q.page,"simple":true,"per-page":_vm.q.page_size},on:{"update:current":function($event){return _vm.$set(_vm.q, "page", $event)}}})],1)])]),_vm._ssrNode(" "),(_vm.loading)?_vm._ssrNode("<div class=\"columns is-variable is-2 is-multiline\">","</div>",_vm._l((6),function(i){return _vm._ssrNode("<div class=\"column is-2\">","</div>",[_c('b-skeleton',{attrs:{"width":"100%","height":"145px"}})],1)}),0):_vm._ssrNode(("<div class=\"columns is-variable is-2 is-multiline\">"+(_vm._ssrList((_vm.response.results),function(img){return ("<div class=\"column is-2\"><div class=\"image clickable is-1by1\"><img"+(_vm._ssrAttr("src",img.sizes['thumb_247_247']))+(_vm._ssrAttr("alt",img.title))+"></div></div>")}))+"</div>"))],2)]):_vm._e()],2)}
var MediaSelectvue_type_template_id_301d6832_staticRenderFns = []


// CONCATENATED MODULE: ./components/field/MediaSelect.vue?vue&type=template&id=301d6832&

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./components/field/Upload.vue?vue&type=template&id=4052abf0&
var Uploadvue_type_template_id_4052abf0_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-upload',{attrs:{"multiple":_vm.multiple,"drag-drop":""},on:{"input":_vm.handleInput},model:{value:(_vm.dropFiles),callback:function ($$v) {_vm.dropFiles=$$v},expression:"dropFiles"}},[_c('div',{staticClass:"content has-text-centered"},[_c('p',[_c('b-icon',{attrs:{"icon":"cloud-upload","size":"is-large"}})],1),_vm._v(" "),(_vm.text)?_c('p',[_vm._v(_vm._s(_vm.text))]):_vm._e()]),_vm._v(" "),_c('b-loading',{attrs:{"is-full-page":false,"active":_vm.isLoading,"can-cancel":true},on:{"update:active":function($event){_vm.isLoading=$event}}})],1)}
var Uploadvue_type_template_id_4052abf0_staticRenderFns = []


// CONCATENATED MODULE: ./components/field/Upload.vue?vue&type=template&id=4052abf0&

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./components/field/Upload.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
/* harmony default export */ var Uploadvue_type_script_lang_js_ = ({
  props: {
    text: {},
    multiple: {
      type: Boolean,
      default: false
    },
    app: {}
  },

  data() {
    return {
      dropFiles: [],
      isLoading: false
    };
  },

  name: 'upload',
  methods: {
    async handleInput(data) {
      let results = [];
      this.isLoading = true;

      if (this.multiple) {
        for (let i = 0; i < data.length; i++) {
          let res = await this.beforeUpload(data[i]);
          results.push(res);
        }
      } else {
        let res = await this.beforeUpload(data);
        results.push(res);
      }

      this.$emit('done', results);
      this.dropFiles = [];
      this.isLoading = false;
    },

    async beforeUpload(file) {
      let formData = new FormData();
      formData.append('path', file);
      formData.append('title', file.name);

      if (this.app) {
        formData.append('app', this.app.id);
      }

      return await this.$api.media.create(formData);
    }

  }
});
// CONCATENATED MODULE: ./components/field/Upload.vue?vue&type=script&lang=js&
 /* harmony default export */ var field_Uploadvue_type_script_lang_js_ = (Uploadvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./components/field/Upload.vue





/* normalize component */

var Upload_component = Object(componentNormalizer["a" /* default */])(
  field_Uploadvue_type_script_lang_js_,
  Uploadvue_type_template_id_4052abf0_render,
  Uploadvue_type_template_id_4052abf0_staticRenderFns,
  false,
  null,
  null,
  "121e6410"
  
)

/* harmony default export */ var Upload = (Upload_component.exports);
// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./components/field/MediaSelect.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//


/* harmony default export */ var MediaSelectvue_type_script_lang_js_ = ({
  name: "MediaSelect",
  components: {
    'upload': Upload
  },
  props: {
    value: {},
    query: {
      default: () => {
        return {};
      }
    },
    multiple: {
      type: Boolean,
      default: false
    },
    column: {
      default: 'is-2'
    }
  },

  data() {
    let data = this.value;

    if (!data) {
      data = this.multiple ? [] : null;
    }

    return {
      data: data,
      response: {
        count: 0,
        results: []
      },
      isShow: false,
      loading: false,
      q: {
        search: null,
        page_size: 6,
        oder_by: '-id',
        page: 1
      }
    };
  },

  methods: {
    fetch: Object(external_lodash_["debounce"])(async function (text) {
      this.loading = true;
      this.q.search = text;
      this.$api.media.list({ ...this.q,
        ...this.query
      }).then(res => {
        this.response = res;
      }).catch(() => {
        this.fetch(this.q.search);
      }).finally(() => {
        this.loading = false;
      });
    }),

    uploaded(results) {
      this.response.results.splice(this.response.results.length - 1 - results.length, results.length);
      this.response.results = results.concat(this.response.results);
    },

    select(img) {
      if (this.multiple) {
        let index = this.data.map(x => x.id).indexOf(img.id);

        if (index >= 0) {
          this.data.splice(index, 1);
        } else {
          this.data.push(img);
        }
      } else {
        if (this.data && this.data.id === img.id) {
          this.data = null;
        } else {
          this.data = img;
        }
      }
    },

    showModal(flag = false) {
      if (!flag) {
        this.isShow = true;

        if (this.response.results.length === 0) {
          this.fetch(null);
        }
      }
    },

    deleteItem(index) {
      if (this.multiple) {
        this.data.splice(index, 1);
      } else {
        this.data = null;
      }
    }

  },
  watch: {
    data: {
      deep: true,
      handler: function () {
        this.$emit('input', this.data);
      }
    },
    value: {
      deep: true,
      handler: function () {
        this.data = this.value;
      }
    },

    'q.page'() {
      this.fetch(this.q.search);
    },

    'q.search'() {
      this.q.page = 1;
    }

  },
  computed: {
    shows() {
      if (this.multiple) {
        return this.data;
      } else {
        return this.data ? [this.data] : [];
      }
    }

  }
});
// CONCATENATED MODULE: ./components/field/MediaSelect.vue?vue&type=script&lang=js&
 /* harmony default export */ var field_MediaSelectvue_type_script_lang_js_ = (MediaSelectvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./components/field/MediaSelect.vue



function MediaSelect_injectStyles (context) {
  
  var style0 = __webpack_require__(47)
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var MediaSelect_component = Object(componentNormalizer["a" /* default */])(
  field_MediaSelectvue_type_script_lang_js_,
  MediaSelectvue_type_template_id_301d6832_render,
  MediaSelectvue_type_template_id_301d6832_staticRenderFns,
  false,
  MediaSelect_injectStyles,
  null,
  "79c7a619"
  
)

/* harmony default export */ var MediaSelect = (MediaSelect_component.exports);
// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./components/field/index.vue?vue&type=template&id=7a620960&scoped=true&
var fieldvue_type_template_id_7a620960_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{attrs:{"expanded":"","label":_vm.schema.label}},[(_vm.schema.type === _vm.types.TEXT)?_c('b-input',{attrs:{"expanded":"","placeholder":_vm.schema.options.help},model:{value:(_vm.temp),callback:function ($$v) {_vm.temp=$$v},expression:"temp"}}):(_vm.schema.type === _vm.types.NUMBER)?_c('b-numberinput',{attrs:{"expanded":"","placeholder":_vm.schema.options.help,"controls-position":"compact"},model:{value:(_vm.temp),callback:function ($$v) {_vm.temp=$$v},expression:"temp"}}):(_vm.schema.type === _vm.types.EDITOR)?_c('editor',{attrs:{"expanded":""},model:{value:(_vm.temp),callback:function ($$v) {_vm.temp=$$v},expression:"temp"}}):(_vm.schema.type === _vm.types.T_ARRAY)?_c('b-taginput',{attrs:{"expanded":""},model:{value:(_vm.temp),callback:function ($$v) {_vm.temp=$$v},expression:"temp"}}):(_vm.schema.type === _vm.types.JSON)?_c('FieldJson',{attrs:{"schema":_vm.schema},model:{value:(_vm.temp),callback:function ($$v) {_vm.temp=$$v},expression:"temp"}}):(_vm.schema.type === _vm.types.J_ARRAY)?_c('JsonArray',{attrs:{"schema":_vm.schema},model:{value:(_vm.temp),callback:function ($$v) {_vm.temp=$$v},expression:"temp"}}):(_vm.schema.type === _vm.types.SELECT)?_c('b-select',{attrs:{"expanded":""},model:{value:(_vm.temp),callback:function ($$v) {_vm.temp=$$v},expression:"temp"}},[_vm._l((_vm.schema.options.dataset),function(option){return _c('option',{key:option.value,domProps:{"value":option.value}},[_vm._v("\n            "+_vm._s(option.label)+"\n        ")])}),_vm._v(" "),_c('option',{domProps:{"value":null}},[_vm._v("________")])],2):(_vm.schema.type === _vm.types.DATA)?_c('SelectData',{attrs:{"module":_vm.schema.options['module'],"field":_vm.schema.options['field_showing'],"q":_vm.schema.options.query},model:{value:(_vm.temp),callback:function ($$v) {_vm.temp=$$v},expression:"temp"}}):(_vm.schema.type === _vm.types.BOOLEAN)?_c('b-switch',{model:{value:(_vm.temp),callback:function ($$v) {_vm.temp=$$v},expression:"temp"}}):(_vm.schema.type === _vm.types.MEDIA)?_c('MediaSelect',{attrs:{"multiple":_vm.schema.options['multiple']},model:{value:(_vm.temp),callback:function ($$v) {_vm.temp=$$v},expression:"temp"}}):(_vm.schema.type === _vm.types.DATETIME)?_c('b-datetimepicker',{attrs:{"expanded":""},model:{value:(_vm.temp),callback:function ($$v) {_vm.temp=$$v},expression:"temp"}}):_vm._e()],1)}
var fieldvue_type_template_id_7a620960_scoped_true_staticRenderFns = []


// CONCATENATED MODULE: ./components/field/index.vue?vue&type=template&id=7a620960&scoped=true&

// CONCATENATED MODULE: ./helper/data_types.js
const TEXT = 'text';
const NUMBER = 'number';
const JSON = 'json';
const DATA = 'data';
const J_ARRAY = 'json_array';
const T_ARRAY = 'text_array';
const DATETIME = 'datetime';
const BOOLEAN = 'boolean';
const SELECT = 'select';
const MEDIA = 'media';
const EDITOR = 'EDITOR';
// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./components/field/Editor.vue?vue&type=template&id=8c9a03d4&
var Editorvue_type_template_id_8c9a03d4_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"content"},[_c('tiny-editor',{attrs:{"api-key":"sgdhe7czf3wgmsipn054ql44mi1ce2khbevpw9atwsq3ir1q","init":_vm.editorConfig},model:{value:(_vm.editorData),callback:function ($$v) {_vm.editorData=$$v},expression:"editorData"}})],1)}
var Editorvue_type_template_id_8c9a03d4_staticRenderFns = []


// CONCATENATED MODULE: ./components/field/Editor.vue?vue&type=template&id=8c9a03d4&

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./components/field/Editor.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//


const Editorvue_type_script_lang_js_turndown = new external_turndown_default.a();
/* harmony default export */ var field_Editorvue_type_script_lang_js_ = ({
  name: "Editor",
  components: {
    'tiny-editor': tinymce_vue_default.a
  },
  props: {
    value: {},
    placeholder: {},
    changed: {},
    height: {
      default: 250
    }
  },

  data() {
    return {
      editor: null,
      editorData: null,
      editorConfig: {
        height: this.height,
        menubar: false,
        plugins: ['advlist autolink lists link image charmap print preview anchor', 'searchreplace visualblocks code fullscreen', 'insertdatetime media table paste code help wordcount'],
        toolbar: 'undo redo | formatselect | bold italic backcolor | \
                    alignleft aligncenter alignright alignjustify | \
                    bullist numlist outdent indent | removeformat | help'
      },
      turnDown: null
    };
  },

  methods: {},
  watch: {
    editorData() {
      this.$emit('input', Editorvue_type_script_lang_js_turndown.turndown(this.editorData));
    },

    changed() {
      this.editorData = this.toHTML(this.value);
    }

  },

  created() {
    this.editorData = this.toHTML(this.value);
  }

});
// CONCATENATED MODULE: ./components/field/Editor.vue?vue&type=script&lang=js&
 /* harmony default export */ var components_field_Editorvue_type_script_lang_js_ = (field_Editorvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./components/field/Editor.vue





/* normalize component */

var Editor_component = Object(componentNormalizer["a" /* default */])(
  components_field_Editorvue_type_script_lang_js_,
  Editorvue_type_template_id_8c9a03d4_render,
  Editorvue_type_template_id_8c9a03d4_staticRenderFns,
  false,
  null,
  null,
  "aead6938"
  
)

/* harmony default export */ var field_Editor = (Editor_component.exports);
// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./components/field/Json.vue?vue&type=template&id=3185e634&scoped=true&
var Jsonvue_type_template_id_3185e634_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"card"},[_vm._ssrNode("<div class=\"card-content\" data-v-3185e634>","</div>",_vm._l((_vm.schema.options.schemas),function(sch,i){return _c('s-field',{key:i,attrs:{"schema":sch,"value":_vm.temp[sch.field]},on:{"input":function($event){_vm.temp[sch.field] = $event}}})}),1)])}
var Jsonvue_type_template_id_3185e634_scoped_true_staticRenderFns = []


// CONCATENATED MODULE: ./components/field/Json.vue?vue&type=template&id=3185e634&scoped=true&

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./components/field/Json.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
/* harmony default export */ var Jsonvue_type_script_lang_js_ = ({
  name: "FieldJson",
  props: {
    schema: {},
    value: {
      default: () => {
        return {};
      }
    }
  },

  data() {
    return {
      temp: this.value
    };
  },

  watch: {
    temp: {
      handler: function (after, before) {
        this.$emit('input', after);
      },
      deep: true
    }
  }
});
// CONCATENATED MODULE: ./components/field/Json.vue?vue&type=script&lang=js&
 /* harmony default export */ var field_Jsonvue_type_script_lang_js_ = (Jsonvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./components/field/Json.vue



function Json_injectStyles (context) {
  
  
}

/* normalize component */

var Json_component = Object(componentNormalizer["a" /* default */])(
  field_Jsonvue_type_script_lang_js_,
  Jsonvue_type_template_id_3185e634_scoped_true_render,
  Jsonvue_type_template_id_3185e634_scoped_true_staticRenderFns,
  false,
  Json_injectStyles,
  "3185e634",
  "5868cd1f"
  
)

/* harmony default export */ var Json = (Json_component.exports);
// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./components/field/SelectData.vue?vue&type=template&id=0ef05d06&
var SelectDatavue_type_template_id_0ef05d06_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.multiple)?_c('b-taginput',{staticClass:"editable",attrs:{"loading":_vm.fetching,"size":_vm.size,"data":_vm.querySet,"autocomplete":"","allow-new":_vm.allowNew,"open-on-focus":_vm.openOnFocus,"field":_vm.field,"icon":_vm.icon,"placeholder":_vm.placeholder,"before-adding":_vm.beforeAdding},on:{"add":_vm.onAdd,"typing":_vm.getQuerySet},scopedSlots:_vm._u([{key:"default",fn:function(props){return [_vm._v("\n        "+_vm._s(props.option[_vm.field])+"\n    ")]}}],null,false,2608211262),model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:"data"}},[_vm._v(" "),_c('template',{slot:"empty"},[_vm._v("Enter to add")])],2):_c('div',{staticClass:"taginput"},[_c('div',{staticClass:"taginput-container is-focusable"},[_c('b-autocomplete',{attrs:{"loading":_vm.fetching,"size":_vm.size,"placeholder":_vm.placeholder,"keep-first":_vm.keepFirst,"open-on-focus":_vm.openOnFocus,"data":_vm.querySet,"field":_vm.field,"icon":_vm.icon},on:{"focus":function($event){return _vm.$emit('focus')},"typing":_vm.getQuerySet,"select":_vm.onSelect},nativeOn:{"keyup":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")){ return null; }return _vm.onAdd(_vm.name)}},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:"name"}},[(_vm.allowNew)?_c('template',{slot:"footer"},[_c('a',{on:{"click":function($event){return _vm.onAdd(_vm.name)}}},[_c('span',[_vm._v(" Add new... ")])])]):_vm._e(),_vm._v(" "),_c('template',{slot:"empty"},[_vm._v("No results for "+_vm._s(_vm.name))])],2)],1)])}
var SelectDatavue_type_template_id_0ef05d06_staticRenderFns = []


// CONCATENATED MODULE: ./components/field/SelectData.vue?vue&type=template&id=0ef05d06&

// EXTERNAL MODULE: external "lodash/debounce"
var debounce_ = __webpack_require__(44);
var debounce_default = /*#__PURE__*/__webpack_require__.n(debounce_);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./components/field/SelectData.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

/* harmony default export */ var SelectDatavue_type_script_lang_js_ = ({
  name: 'SelectData',
  props: {
    multiple: {
      default: false,
      type: Boolean
    },
    icon: {
      default: 'tag',
      type: String
    },
    field: {
      default: 'title',
      type: String
    },
    createField: {
      default: 'title',
      type: String
    },
    value: {},
    module: {},
    allowNew: {
      type: Boolean,
      default: true
    },
    size: {},
    placeholder: {
      type: String,
      default: 'Anything'
    },
    q: {
      default: () => {
        return {};
      },
      type: Object
    }
  },

  data() {
    let data = this.value;

    if (!Boolean(data)) {
      if (this.multiple) {
        data = [];
      } else {
        data = null;
      }
    }

    let name = null;

    if (!this.multiple && this.value) {
      name = this.value[this.field];
    }

    return {
      name,
      querySet: [],
      isSelectOnly: false,
      data: data,
      openOnFocus: false,
      keepFirst: false,
      fetching: false
    };
  },

  methods: {
    onSelect(option) {
      this.data = option;
      this.$emit('add', option);
      this.$emit('input', option);
    },

    async onAdd(e) {
      if (typeof e === 'string') {
        if (this.multiple) {
          this.data[this.data.indexOf(e)] = await this.$api[this.module].create({
            [this.createField]: e,
            ...this.cleanData(this.q)
          });
        } else {
          this.data = await this.$api[this.module].create({
            [this.createField]: e,
            ...this.cleanData(this.q)
          });
          this.name = this.data[this.field];
        }
      }
    },

    beforeAdding(tag) {
      let check = this.data.map(x => x.id).indexOf(tag.id);
      return check === -1;
    },

    getQuerySet: debounce_default()(function (text) {
      this.$api[this.module].list({ ...this.q,
        search: text
      }).then(res => {
        this.querySet = res['results'];
      });
    }, 500)
  },
  watch: {
    value() {
      this.data = this.value;

      if (!this.multiple && this.value) {
        this.name = this.value[this.field];
      } else {
        this.name = null;
      }
    },

    data() {
      this.$emit('input', this.data);
    }

  }
});
// CONCATENATED MODULE: ./components/field/SelectData.vue?vue&type=script&lang=js&
 /* harmony default export */ var field_SelectDatavue_type_script_lang_js_ = (SelectDatavue_type_script_lang_js_); 
// CONCATENATED MODULE: ./components/field/SelectData.vue





/* normalize component */

var SelectData_component = Object(componentNormalizer["a" /* default */])(
  field_SelectDatavue_type_script_lang_js_,
  SelectDatavue_type_template_id_0ef05d06_render,
  SelectDatavue_type_template_id_0ef05d06_staticRenderFns,
  false,
  null,
  null,
  "429788bd"
  
)

/* harmony default export */ var SelectData = (SelectData_component.exports);
// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./components/field/JsonArray.vue?vue&type=template&id=011012af&
var JsonArrayvue_type_template_id_011012af_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-collapse',{staticClass:"j-array card",attrs:{"animation":"slide","open":false},scopedSlots:_vm._u([{key:"trigger",fn:function(props){return _c('div',{staticClass:"card-header",attrs:{"role":"button"}},[_c('p',{staticClass:"card-header-title"},[_vm._v(_vm._s(_vm.schema.label))]),_vm._v(" "),_c('a',{staticClass:"card-header-icon"},[_c('b-icon',{attrs:{"icon":props.open ? 'menu-down' : 'menu-up'}})],1)])}}])},[_vm._v(" "),_c('div',{staticClass:"card-content"},[_vm._l((_vm.temp),function(item,index){return _c('div',{key:index,staticClass:"card"},[_c('div',{staticClass:"card-content"},[_c('div',{staticClass:"media"},[_c('div',{staticClass:"media-content"},[_vm._v("#"+_vm._s(index + 1)+" - "+_vm._s(item.field))]),_vm._v(" "),_c('div',{staticClass:"media-right"},[_c('div',{staticClass:"buttons"},[_c('div',{staticClass:"button is-text is-small",on:{"click":function($event){return _vm.updateItem(item)}}},[_c('b-icon',{attrs:{"icon":"cogs","size":"is-small"}})],1),_vm._v(" "),_c('div',{staticClass:"button is-text is-small",on:{"click":function($event){return _vm.deleteItem(item)}}},[_c('b-icon',{attrs:{"type":"is-danger","icon":"delete","size":"is-small"}})],1)])])])])])}),_vm._v(" "),_c('div',{staticClass:"card clickable",on:{"click":function($event){return _vm.add()}}},[_c('div',{staticClass:"card-content"},[_c('b-icon',{attrs:{"size":"is-small","icon":"plus"}})],1)])],2),_vm._v(" "),_c('b-modal',{attrs:{"active":_vm.showModal},on:{"update:active":function($event){_vm.showModal=$event}}},[(_vm.active)?_c('div',{staticClass:"modal-card"},[_c('div',{staticClass:"modal-card-head"},[_c('div',{staticClass:"modal-card-title"},[_vm._v(_vm._s(_vm.active.label ? _vm.active.label : "Untitled"))]),_vm._v(" "),_c('div',{staticClass:"modal-card-icon"},[_c('div',{staticClass:"buttons"},[_c('div',{staticClass:"button is-danger is-small",on:{"click":function($event){return _vm.deleteItem(_vm.active)}}},[_c('b-icon',{attrs:{"size":"is-small","icon":"delete"}})],1),_vm._v(" "),_c('div',{staticClass:"button is-small",on:{"click":function($event){_vm.showModal=false}}},[_c('b-icon',{attrs:{"size":"is-small","icon":"close"}})],1)])])]),_vm._v(" "),_c('div',{staticClass:"modal-card-body scrollable"},_vm._l((_vm.schema.options.schemas),function(sch){return _c('s-field',{key:sch.field,attrs:{"schema":sch,"value":_vm.active[sch.field]},on:{"input":function($event){_vm.active[sch.field] = $event}}})}),1)]):_vm._e()])],1)}
var JsonArrayvue_type_template_id_011012af_staticRenderFns = []


// CONCATENATED MODULE: ./components/field/JsonArray.vue?vue&type=template&id=011012af&

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./components/field/JsonArray.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

/* harmony default export */ var JsonArrayvue_type_script_lang_js_ = ({
  name: "JsonArray",
  props: {
    schema: {},
    value: {
      default: () => {
        return [];
      }
    }
  },

  data() {
    let newInstance = {};

    if (this.schema.options.schemas) {
      this.schema.options.schemas.forEach(sch => {
        newInstance[sch.field] = sch.options.default ? sch.options.default : null;
      });
    }

    return {
      opening: 0,
      temp: this.value ? this.value : [],
      newInstance: newInstance,
      active: null,
      showModal: false
    };
  },

  methods: {
    add() {
      this.temp.push(Object(external_lodash_["cloneDeep"])(this.newInstance));
    },

    updateItem(item) {
      this.active = item;
      this.showModal = true;
    },

    deleteItem(item) {
      if (item) {
        let index = this.temp.map(x => x.field).indexOf(item.field);

        if (index >= 0) {
          this.temp.splice(index, 1);
        }
      }
    }

  },
  watch: {
    temp: {
      handler: function (after, before) {
        this.$emit('input', after);
      },
      deep: true
    }
  }
});
// CONCATENATED MODULE: ./components/field/JsonArray.vue?vue&type=script&lang=js&
 /* harmony default export */ var field_JsonArrayvue_type_script_lang_js_ = (JsonArrayvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./components/field/JsonArray.vue



function JsonArray_injectStyles (context) {
  
  var style0 = __webpack_require__(49)
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var JsonArray_component = Object(componentNormalizer["a" /* default */])(
  field_JsonArrayvue_type_script_lang_js_,
  JsonArrayvue_type_template_id_011012af_render,
  JsonArrayvue_type_template_id_011012af_staticRenderFns,
  false,
  JsonArray_injectStyles,
  null,
  "71bed22a"
  
)

/* harmony default export */ var JsonArray = (JsonArray_component.exports);
// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./components/field/index.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//






/* harmony default export */ var fieldvue_type_script_lang_js_ = ({
  name: "SField",
  components: {
    JsonArray: JsonArray,
    MediaSelect: MediaSelect,
    SelectData: SelectData,
    FieldJson: Json,
    Editor: field_Editor
  },
  props: {
    schema: {
      default: () => {
        return {
          label: null,
          // Required
          field: 'field',
          // Required
          type: TEXT,
          // Required
          options: {
            /*
            * dataset: Array
            * default: Any
            * schemas: Array - use for JSOM & JSON ARRAY
            * field_value: String - use for data selector
            * field_showing: String - use for data selector
            * module: String - use for data selector
            * help: String
            * multiple: Boolean
            * type: String - use for TextField
            * */
          }
        };
      }
    },
    value: {
      default: null
    }
  },

  data() {
    let temp = this.value;

    if (temp === null) {
      if (this.schema.type === JSON) {
        temp = {};
        this.$emit('input', temp);
      }
    }

    return {
      types: data_types_namespaceObject,
      temp
    };
  },

  watch: {
    temp: {
      handler: function (after, before) {
        this.$emit('input', after);
      },
      deep: true
    }
  }
});
// CONCATENATED MODULE: ./components/field/index.vue?vue&type=script&lang=js&
 /* harmony default export */ var components_fieldvue_type_script_lang_js_ = (fieldvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./components/field/index.vue



function field_injectStyles (context) {
  
  
}

/* normalize component */

var field_component = Object(componentNormalizer["a" /* default */])(
  components_fieldvue_type_script_lang_js_,
  fieldvue_type_template_id_7a620960_scoped_true_render,
  fieldvue_type_template_id_7a620960_scoped_true_staticRenderFns,
  false,
  field_injectStyles,
  "7a620960",
  "504654cb"
  
)

/* harmony default export */ var field = (field_component.exports);
// EXTERNAL MODULE: external "buefy"
var external_buefy_ = __webpack_require__(2);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/post/index.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//






const DEFAULT_POST = {
  title: null,
  description: null,
  content: null,
  meta: {},
  post_type: 'post',
  terms: []
};
/* harmony default export */ var postvue_type_script_lang_js_ = ({
  name: "PostMaster",
  components: {
    MediaSelect: MediaSelect,
    TaxSelector: TaxSelector,
    Editor: Editor,
    's-field': field
  },

  head() {
    return {
      title: `New ${this.form.post_type}` + ` - ${this.publication.host}`
    };
  },

  computed: {
    publication() {
      return this.$store.state.config.publication;
    },

    field_addons() {
      if (this.publication && this.publication.options['post_types'] && this.form.post_type) {
        let post_type = this.publication.options['post_types'].filter(x => x.label === this.form.post_type);

        if (post_type.length && post_type[0]['field_addons']) {
          return post_type[0]['field_addons'];
        }
      }

      return [];
    },

    uri() {
      return `/pub-${this.$store.state.config.publication.id}/posts/`;
    }

  },

  data() {
    return {
      url: null,
      form: Object(external_lodash_["cloneDeep"])(DEFAULT_POST),
      showOption: false,
      loading: {
        fetch: false,
        submit: false
      }
    };
  },

  methods: {
    addTerm(tax) {
      let ids = this.form.terms.map(x => x.id);
      let index = ids.indexOf(tax.id);

      if (index >= 0) {
        this.form.terms.splice(index, 1);
      } else {
        this.form.terms.push(tax);
      }
    },

    fetchURL() {
      if (this.url) {
        this.loading.fetch = true;
        this.$axios.$get('/general/fetch/', {
          params: {
            url: this.url
          }
        }).then(res => {
          this.form.title = res.title;
          this.form.description = res.description;
          this.form.meta['url'] = this.url;
        }).catch(() => {
          this.form.title = null;
          this.form.description = null;
          this.form.meta['url'] = null;
        }).finally(() => {
          this.loading.fetch = false;
        });
      }
    },

    submit() {
      this.loading.submit = true;
      this.$axios.$post(this.uri, { ...this.cleanData(this.form),
        publications: [this.publication.id]
      }).then(res => {
        external_buefy_["SnackbarProgrammatic"].open({
          type: 'is-success',
          message: "Successfully!"
        });
        this.form = Object(external_lodash_["cloneDeep"])(DEFAULT_POST);
        this.$router.replace({
          path: `/${res.post_type}/${res.slug}`
        });
      }).catch(() => {
        external_buefy_["SnackbarProgrammatic"].open({
          type: 'is-danger',
          message: "Something wrong!"
        });
      }).finally(() => {
        this.loading.submit = false;
      });
    }

  },
  watch: {
    'form.post_type'() {
      this.url = null;
      this.form.title = null;
      this.form.description = null;
      this.form.meta['url'] = null;
    }

  }
});
// CONCATENATED MODULE: ./pages/post/index.vue?vue&type=script&lang=js&
 /* harmony default export */ var pages_postvue_type_script_lang_js_ = (postvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./pages/post/index.vue



function post_injectStyles (context) {
  
  
}

/* normalize component */

var post_component = Object(componentNormalizer["a" /* default */])(
  pages_postvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  post_injectStyles,
  "304dc7b8",
  "34e47a56"
  
)

/* harmony default export */ var post = __webpack_exports__["default"] = (post_component.exports);

/***/ })

};;
//# sourceMappingURL=index.js.map